/* eslint-disable max-len, quotes, comma-spacing, key-spacing, quote-props */
// Request: search {"q":"ost","fields":["pid","creator","coverUrlFull"],"limit":3}
'use strict';
import Provider from '../../provider/Provider.js';
import {assert, fail} from 'chai';

let provider = Provider();
let mockData = {"[\"opensearch\",\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<SOAP-ENV:Envelope xmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:ns1=\\\"http://oss.dbc.dk/ns/opensearch\\\">\\n  <SOAP-ENV:Body>\\n    <ns1:searchRequest>\\n      <ns1:query>ost</ns1:query>\\n      <ns1:agency>775100</ns1:agency>\\n      <ns1:profile>opac</ns1:profile>\\n      <ns1:start>1</ns1:start>\\n      <ns1:stepValue>3</ns1:stepValue>\\n      \\n      <ns1:collectionType>work-1</ns1:collectionType>\\n      <ns1:allObjects>1</ns1:allObjects>\\n      <ns1:objectFormat>briefDisplay</ns1:objectFormat>\\n      <ns1:objectFormat>dkabm</ns1:objectFormat>\\n      <ns1:outputType>json</ns1:outputType>\\n    </ns1:searchRequest>\\n  </SOAP-ENV:Body>\\n</SOAP-ENV:Envelope>\\n\"]":"{\"searchResponse\":{\"result\":{\"hitCount\":{\"$\":\"154\"},\"collectionCount\":{\"$\":\"3\"},\"more\":{\"$\":\"true\"},\"searchResult\":[{\"collection\":{\"resultPosition\":{\"$\":\"1\"},\"numberOfObjects\":{\"$\":\"1\"},\"object\":[{\"record\":{\"identifier\":[{\"$\":\"27400337|870970\",\"@\":\"ac\"},{\"$\":\"9788799164516\",\"@type\":{\"$\":\"dkdcplus:ISBN\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"source\":[{\"$\":\"Bibliotekskatalog\",\"@\":\"ac\"}],\"title\":[{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\",\"@\":\"dc\"},{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\",\"@type\":{\"$\":\"dkdcplus:full\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"alternative\":[{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk & ost\",\"@\":\"dcterms\"},{\"$\":\"\\u00c6g m\\u00e6lk ost\",\"@\":\"dcterms\"},{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk og ost\",\"@\":\"dcterms\"}],\"subject\":[{\"$\":\"64.14\",\"@type\":{\"$\":\"dkdcplus:DK5\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Di\\u00e6tmadlavning\",\"@type\":{\"$\":\"dkdcplus:DK5-Text\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"kogeb\\u00f8ger\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"m\\u00e6lk\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"opskrifter\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ost\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"slankeretter\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"\\u00e6g\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"audience\":[{\"$\":\"voksenmaterialer\",\"@\":\"dcterms\"}],\"version\":[{\"$\":\"1. udgave, [1. oplag] (2008)\",\"@\":\"dkdcplus\"}],\"publisher\":[{\"$\":\"De Danske V\\u00e6gtkonsulenter\",\"@\":\"dc\"}],\"contributor\":[{\"$\":\"Inge Kauffeldt\",\"@\":\"dc\"},{\"$\":\"Helle Kleist\",\"@\":\"dc\"},{\"$\":\"De Danske V\\u00e6gtkonsulenter\",\"@\":\"dc\"}],\"date\":[{\"$\":\"2008\",\"@\":\"dc\"}],\"type\":[{\"$\":\"Bog\",\"@type\":{\"$\":\"dkdcplus:BibDK-Type\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"format\":[{\"$\":\"illustreret i farver\",\"@\":\"dc\"}],\"extent\":[{\"$\":\"123 sider\",\"@\":\"dcterms\"}],\"language\":[{\"$\":\"dan\",\"@type\":{\"$\":\"dcterms:ISO639-2\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dansk\",\"@\":\"dc\"}],\"@\":\"dkabm\"},\"identifier\":{\"$\":\"775100-katalog:27400337\"},\"primaryObjectIdentifier\":{\"$\":\"870970-basis:27400337\"},\"recordStatus\":{\"$\":\"active\"},\"formatsAvailable\":{\"format\":[{\"$\":\"dkabm\"},{\"$\":\"marcxchange\"}]},\"objectsAvailable\":{\"identifier\":[{\"$\":\"775100-katalog:27400337\"},{\"$\":\"870970-basis:27400337\"}]}}]},\"formattedCollection\":{\"briefDisplay\":{\"manifestation\":[{\"accessType\":{\"$\":\"physical\"},\"fedoraPid\":{\"$\":\"830370-katalog:27400337\"},\"identifier\":{\"$\":\"775100-katalog:27400337\"},\"language\":{\"$\":\"Dansk\"},\"title\":{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\"},\"titleFull\":{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\"},\"type\":{\"$\":\"Bog\"},\"workType\":{\"$\":\"book\"}}]}}},{\"collection\":{\"resultPosition\":{\"$\":\"2\"},\"numberOfObjects\":{\"$\":\"1\"},\"object\":[{\"record\":{\"identifier\":[{\"$\":\"29130612|870970\",\"@\":\"ac\"},{\"$\":\"9788799293643\",\"@type\":{\"$\":\"dkdcplus:ISBN\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"source\":[{\"$\":\"Bibliotekskatalog\",\"@\":\"ac\"}],\"title\":[{\"$\":\"Bogen om ost\",\"@\":\"dc\"},{\"$\":\"Bogen om ost : mild moden mangfoldig : lav din egen ost\",\"@type\":{\"$\":\"dkdcplus:full\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"subject\":[{\"$\":\"63.7\",\"@type\":{\"$\":\"dkdcplus:DK5\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Mejeribrug\",\"@type\":{\"$\":\"dkdcplus:DK5-Text\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"fremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"opskrifter\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ost\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ostefremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"audience\":[{\"$\":\"voksenmaterialer\",\"@\":\"dcterms\"}],\"version\":[{\"$\":\"1. udgave, 1. oplag (2011)\",\"@\":\"dkdcplus\"}],\"publisher\":[{\"$\":\"Niche\",\"@\":\"dc\"}],\"contributor\":[{\"$\":\"Kirsten Iversen\",\"@type\":{\"$\":\"dkdcplus:aut\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Lone Hind\\u00f8\",\"@type\":{\"$\":\"dkdcplus:aut\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Peer Kj\\u00e6r Andersen\",\"@type\":{\"$\":\"dkdcplus:dktek\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Vagn Juhl-Larsen\",\"@type\":{\"$\":\"dkdcplus:edt\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Gunnar Knuds\\u00f8\\u00f8 Jensen\",\"@type\":{\"$\":\"dkdcplus:ill\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"date\":[{\"$\":\"2011\",\"@\":\"dc\"}],\"type\":[{\"$\":\"Bog\",\"@type\":{\"$\":\"dkdcplus:BibDK-Type\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"format\":[{\"$\":\"illustreret i farver\",\"@\":\"dc\"}],\"extent\":[{\"$\":\"135 sider\",\"@\":\"dcterms\"}],\"language\":[{\"$\":\"dan\",\"@type\":{\"$\":\"dcterms:ISO639-2\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dansk\",\"@\":\"dc\"}],\"@\":\"dkabm\"},\"identifier\":{\"$\":\"775100-katalog:29130612\"},\"primaryObjectIdentifier\":{\"$\":\"870970-basis:29130612\"},\"recordStatus\":{\"$\":\"active\"},\"formatsAvailable\":{\"format\":[{\"$\":\"dkabm\"},{\"$\":\"marcxchange\"}]},\"objectsAvailable\":{\"identifier\":[{\"$\":\"775100-katalog:29130612\"},{\"$\":\"870970-basis:29130612\"}]}}]},\"formattedCollection\":{\"briefDisplay\":{\"manifestation\":[{\"accessType\":{\"$\":\"physical\"},\"fedoraPid\":{\"$\":\"830370-katalog:29130612\"},\"identifier\":{\"$\":\"775100-katalog:29130612\"},\"language\":{\"$\":\"Dansk\"},\"title\":{\"$\":\"Bogen om ost\"},\"titleFull\":{\"$\":\"Bogen om ost : mild moden mangfoldig : lav din egen ost\"},\"type\":{\"$\":\"Bog\"},\"workType\":{\"$\":\"book\"}}]}}},{\"collection\":{\"resultPosition\":{\"$\":\"3\"},\"numberOfObjects\":{\"$\":\"1\"},\"object\":[{\"record\":{\"identifier\":[{\"$\":\"06468853|870970\",\"@\":\"ac\"},{\"$\":\"87-7545-199-9\",\"@type\":{\"$\":\"dkdcplus:ISBN\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"source\":[{\"$\":\"Bibliotekskatalog\",\"@\":\"ac\"}],\"title\":[{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\",\"@\":\"dc\"},{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\",\"@type\":{\"$\":\"dkdcplus:full\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Skarv's b\\u00f8ger om praktisk \\u00f8kologi\",\"@type\":{\"$\":\"dkdcplus:series\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"alternative\":[{\"$\":\"Ost m. m. til husbehov\",\"@\":\"dcterms\"}],\"creator\":[{\"$\":\"Ingrid Dam\",\"@type\":{\"$\":\"dkdcplus:aut\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dam, Ingrid\",\"@type\":{\"$\":\"oss:sort\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"subject\":[{\"$\":\"63.7\",\"@type\":{\"$\":\"dkdcplus:DK5\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Mejeribrug\",\"@type\":{\"$\":\"dkdcplus:DK5-Text\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"fremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"opskrifter\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ost\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ostefremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"abstract\":[{\"$\":\"Om hjemmefremstilling af oste\",\"@\":\"dcterms\"}],\"description\":[{\"$\":\"Rygtitel: Ost m. m. til husbehov\",\"@\":\"dc\"}],\"audience\":[{\"$\":\"b\\u00f8rnematerialer\",\"@\":\"dcterms\"}],\"version\":[{\"$\":\"1. udg., 1. opl.\",\"@\":\"dkdcplus\"}],\"publisher\":[{\"$\":\"Skarv\",\"@\":\"dc\"},{\"$\":\"eksp. DBK\",\"@\":\"dc\"}],\"date\":[{\"$\":\"1986\",\"@\":\"dc\"}],\"type\":[{\"$\":\"Bog\",\"@type\":{\"$\":\"dkdcplus:BibDK-Type\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"format\":[{\"$\":\"illustreret\",\"@\":\"dc\"}],\"extent\":[{\"$\":\"72 sider\",\"@\":\"dcterms\"}],\"language\":[{\"$\":\"dan\",\"@type\":{\"$\":\"dcterms:ISO639-2\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dansk\",\"@\":\"dc\"}],\"@\":\"dkabm\"},\"identifier\":{\"$\":\"775100-katalog:06468853\"},\"primaryObjectIdentifier\":{\"$\":\"870970-basis:06468853\"},\"recordStatus\":{\"$\":\"active\"},\"formatsAvailable\":{\"format\":[{\"$\":\"dkabm\"},{\"$\":\"marcxchange\"}]},\"objectsAvailable\":{\"identifier\":[{\"$\":\"775100-katalog:06468853\"},{\"$\":\"870970-basis:06468853\"}]}}]},\"formattedCollection\":{\"briefDisplay\":{\"manifestation\":[{\"accessType\":{\"$\":\"physical\"},\"creator\":{\"$\":\"Ingrid Dam\"},\"fedoraPid\":{\"$\":\"830190-katalog:8775451999\"},\"identifier\":{\"$\":\"775100-katalog:06468853\"},\"language\":{\"$\":\"Dansk\"},\"title\":{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\"},\"titleFull\":{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\"},\"type\":{\"$\":\"Bog\"},\"workType\":{\"$\":\"book\"}}]}}}],\"facetResult\":null,\"statInfo\":{\"fedoraRecordsCached\":{\"$\":\"17\"},\"fedoraRecordsRead\":{\"$\":\"1\"},\"time\":{\"$\":\"0.229678\"},\"trackingId\":{\"$\":\"2016-05-23T12:12:37:468423:17169\"}}}},\"@namespaces\":{\"ac\":\"http:\\/\\/biblstandard.dk\\/ac\\/namespace\\/\",\"dbcaddi\":\"http:\\/\\/oss.dbc.dk\\/rdf\\/dbcaddi#\",\"dbcbib\":\"http:\\/\\/oss.dbc.dk\\/rdf\\/dbcbib#\",\"dc\":\"http:\\/\\/purl.org\\/dc\\/elements\\/1.1\\/\",\"dcmitype\":\"http:\\/\\/purl.org\\/dc\\/dcmitype\\/\",\"dcterms\":\"http:\\/\\/purl.org\\/dc\\/terms\\/\",\"dkabm\":\"http:\\/\\/biblstandard.dk\\/abm\\/namespace\\/dkabm\\/\",\"dkdcplus\":\"http:\\/\\/biblstandard.dk\\/abm\\/namespace\\/dkdcplus\\/\",\"docbook\":\"http:\\/\\/docbook.org\\/ns\\/docbook\",\"kml\":\"http:\\/\\/www.opengis.net\\/kml\\/2.2\",\"marcx\":\"info:lc\\/xmlns\\/marcxchange-v1\",\"mx\":\"http:\\/\\/www.loc.gov\\/MARC21\\/slim\",\"of\":\"http:\\/\\/oss.dbc.dk\\/ns\\/openformat\",\"ofo\":\"http:\\/\\/oss.dbc.dk\\/ns\\/openformatoutput\",\"os\":\"http:\\/\\/oss.dbc.dk\\/ns\\/opensearch\",\"oso\":\"http:\\/\\/oss.dbc.dk\\/ns\\/opensearchobjects\",\"oss\":\"http:\\/\\/oss.dbc.dk\\/ns\\/osstypes\",\"xs\":\"http:\\/\\/www.w3.org\\/2001\\/XMLSchema\",\"xsi\":\"http:\\/\\/www.w3.org\\/2001\\/XMLSchema-instance\"}}","[\"moreinfo\",{\"action\":\"moreInfo\",\"params\":{\"identifier\":[{\"localIdentifier\":\"27400337\",\"libraryCode\":\"775100\"},{\"localIdentifier\":\"29130612\",\"libraryCode\":\"775100\"},{\"localIdentifier\":\"06468853\",\"libraryCode\":\"775100\"}]},\"config\":{\"authentication\":{\"authenticationUser\":\"XXXXX\",\"authenticationGroup\":\"XXXXX\",\"authenticationPassword\":\"XXXXX\"}}}]":{"requestStatus":{"statusEnum":"ok","errorText":{}},"identifierInformation":[{"identifierKnown":true,"identifier":{"localIdentifier":"27400337","libraryCode":"775100"},"coverImage":[{"attributes":{"imageSize":"detail_117","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_117&key=03dfcd1b843094643374"},{"attributes":{"imageSize":"detail_207","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_207&key=32c6011a4746558e615c"},{"attributes":{"imageSize":"detail_42","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_42&key=83ed29ba0547af202b60"},{"attributes":{"imageSize":"detail_500","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_500&key=ce95baa8cf5b512415a8"},{"attributes":{"imageSize":"thumbnail","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_lille&key=f9cbb6d29bf3b08e9b63"},{"attributes":{"imageSize":"detail","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_stor&key=3b00ce40be4c34708464"}]},{"identifierKnown":true,"identifier":{"localIdentifier":"29130612","libraryCode":"775100"},"coverImage":[{"attributes":{"imageSize":"detail_117","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_117&key=0491d92384998752bd54"},{"attributes":{"imageSize":"detail_207","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_207&key=e31d581065098252510b"},{"attributes":{"imageSize":"detail_42","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_42&key=2af6cdac04843b4272ab"},{"attributes":{"imageSize":"detail_500","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_500&key=25f8ae13eae02bdc4c31"},{"attributes":{"imageSize":"thumbnail","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_lille&key=839ad047fc37a7a001ae"},{"attributes":{"imageSize":"detail","imageFormat":"jpeg"},"$value":"http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_stor&key=76488d24bb584cbfd462"}],"backPage":["http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=bagside_pdf&key=3ba462aa1b3247ce2198"]},{"identifierKnown":false,"identifier":{"localIdentifier":"06468853","libraryCode":"775100"}}],"raw":"<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n<soapenv:Body><mi:moreInfoResponse xmlns:mi=\"http://oss.dbc.dk/ns/moreinfo\">\n  <mi:requestStatus>\n    <mi:statusEnum>ok</mi:statusEnum>\n    <mi:errorText></mi:errorText>\n  </mi:requestStatus>\n  <mi:identifierInformation>\n    <mi:identifierKnown>true</mi:identifierKnown>\n    <mi:identifier>\n      <mi:localIdentifier>27400337</mi:localIdentifier>\n      <mi:libraryCode>775100</mi:libraryCode>\n    </mi:identifier>\n    <mi:coverImage imageSize=\"detail_117\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&amp;type=forside_117&amp;key=03dfcd1b843094643374</mi:coverImage>\n    <mi:coverImage imageSize=\"detail_207\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&amp;type=forside_207&amp;key=32c6011a4746558e615c</mi:coverImage>\n    <mi:coverImage imageSize=\"detail_42\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&amp;type=forside_42&amp;key=83ed29ba0547af202b60</mi:coverImage>\n    <mi:coverImage imageSize=\"detail_500\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&amp;type=forside_500&amp;key=ce95baa8cf5b512415a8</mi:coverImage>\n    <mi:coverImage imageSize=\"thumbnail\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&amp;type=forside_lille&amp;key=f9cbb6d29bf3b08e9b63</mi:coverImage>\n    <mi:coverImage imageSize=\"detail\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&amp;type=forside_stor&amp;key=3b00ce40be4c34708464</mi:coverImage>\n  </mi:identifierInformation>\n  <mi:identifierInformation>\n    <mi:identifierKnown>true</mi:identifierKnown>\n    <mi:identifier>\n      <mi:localIdentifier>29130612</mi:localIdentifier>\n      <mi:libraryCode>775100</mi:libraryCode>\n    </mi:identifier>\n    <mi:coverImage imageSize=\"detail_117\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=forside_117&amp;key=0491d92384998752bd54</mi:coverImage>\n    <mi:coverImage imageSize=\"detail_207\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=forside_207&amp;key=e31d581065098252510b</mi:coverImage>\n    <mi:coverImage imageSize=\"detail_42\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=forside_42&amp;key=2af6cdac04843b4272ab</mi:coverImage>\n    <mi:coverImage imageSize=\"detail_500\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=forside_500&amp;key=25f8ae13eae02bdc4c31</mi:coverImage>\n    <mi:coverImage imageSize=\"thumbnail\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=forside_lille&amp;key=839ad047fc37a7a001ae</mi:coverImage>\n    <mi:coverImage imageSize=\"detail\" imageFormat=\"jpeg\">http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=forside_stor&amp;key=76488d24bb584cbfd462</mi:coverImage>\n    <mi:backPage>http://moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&amp;type=bagside_pdf&amp;key=3ba462aa1b3247ce2198</mi:backPage>\n  </mi:identifierInformation>\n  <mi:identifierInformation>\n    <mi:identifierKnown>false</mi:identifierKnown>\n    <mi:identifier>\n      <mi:localIdentifier>06468853</mi:localIdentifier>\n      <mi:libraryCode>775100</mi:libraryCode>\n    </mi:identifier>\n  </mi:identifierInformation>\n</mi:moreInfoResponse>\n</soapenv:Body>\n</soapenv:Envelope>"}};

describe('Automated test of the search endpoint', () => {
  it('expected response. ID:g711jn, for {"q":"ost","fields":["pid","creator","coverUrlFull"],"limit":3}', (done) => {
    let context = {"opensearch":{"url":"http://opensearch.addi.dk/b3.0_4.2/","agency":"775100","profile":"opac"},"moreinfo":{"url":"http://moreinfo.addi.dk/2.1/","user":"XXXXX","group":"XXXXX","password":"XXXXX"},"entitysuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1","libraryType":"folkebibliotek"},"popsuggest":{"url":"http://xptest.dbc.dk/ms/entity-pop/v1"},"creatorsuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1/creator"},"librarysuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1/library","librarytype":"folkebibliotek"},"subjectsuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1/subject"},"orderpolicy":{"url":"https://openorder.addi.dk/test_2.7.1/","servicerequester":"190101"},"userstatus":{"salt":"XXXXX","url":"https://openuserstatus.addi.dk/1.4.1/","userid":"XXXXX","userpin":"XXXXX","useragency":"DK-100451","authgroupid":"XXXXX","authpassword":"XXXXX","authid":"XXXXX"},"recommend":{"default":"https://xptest.dbc.dk/ms/recommend-cosim/v1","popular":"https://xptest.dbc.dk/ms/recommend-pop/v1"},"openagency":{"url":"http://openagency.addi.dk/2.24/","agency":"775100"},"ddbcms":{"url":"http://rest.filmstriben.dbc.inlead.dk/web/","agency":"775100","password":"XXXXX"},"openholdingstatus":{"url":"https://openholdingstatus.addi.dk/2.2/","authgroupid":"XXXXX","authpassword":"XXXXX","authid":"XXXXX"}};
    context.mockData = mockData;
    provider.execute('search', {"q":"ost","fields":["pid","creator","coverUrlFull"],"limit":3}, context)
      .then(result => {
        assert.deepEqual(result,
            {"statusCode":200,"data":[{"collection":["775100-katalog:27400337"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["27400337|870970"],"identifierISBN":["9788799164516"],"acSource":["Bibliotekskatalog"],"dcTitle":["Spis dig sund - æg, mælk, ost"],"dcTitleFull":["Spis dig sund - æg, mælk, ost"],"alternative":["Spis dig sund - æg, mælk & ost","Æg mælk ost","Spis dig sund - æg, mælk og ost"],"subjectDK5":["64.14"],"subjectDK5Text":["Diætmadlavning"],"subjectDBCO":["kogebøger","opskrifter"],"subjectDBCF":["mælk","ost","slankeretter","æg"],"audience":["voksenmaterialer"],"version":["1. udgave, [1. oplag] (2008)"],"publisher":["De Danske Vægtkonsulenter"],"contributor":["Inge Kauffeldt","Helle Kleist","De Danske Vægtkonsulenter"],"date":["2008"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["123 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_117&key=03dfcd1b843094643374"],"coverUrl207":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_207&key=32c6011a4746558e615c"],"coverUrl42":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_42&key=83ed29ba0547af202b60"],"coverUrl500":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_500&key=ce95baa8cf5b512415a8"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_lille&key=f9cbb6d29bf3b08e9b63"],"coverUrlFull":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_stor&key=3b00ce40be4c34708464"]},{"collection":["775100-katalog:29130612"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["29130612|870970"],"identifierISBN":["9788799293643"],"acSource":["Bibliotekskatalog"],"dcTitle":["Bogen om ost"],"dcTitleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"audience":["voksenmaterialer"],"version":["1. udgave, 1. oplag (2011)"],"publisher":["Niche"],"contributorAut":["Kirsten Iversen","Lone Hindø"],"contributorDktek":["Peer Kjær Andersen"],"contributorEdt":["Vagn Juhl-Larsen"],"contributorIll":["Gunnar Knudsøø Jensen"],"date":["2011"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["135 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_117&key=0491d92384998752bd54"],"coverUrl207":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_207&key=e31d581065098252510b"],"coverUrl42":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_42&key=2af6cdac04843b4272ab"],"coverUrl500":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_500&key=25f8ae13eae02bdc4c31"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_lille&key=839ad047fc37a7a001ae"],"coverUrlFull":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_stor&key=76488d24bb584cbfd462"]},{"collection":["775100-katalog:06468853"],"collectionDetails":[{"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["06468853|870970"],"identifierISBN":["87-7545-199-9"],"acSource":["Bibliotekskatalog"],"dcTitle":["Ost, smør og surmælksprodukter til husbehov"],"dcTitleFull":["Ost, smør og surmælksprodukter til husbehov"],"titleSeries":["Skarv's bøger om praktisk økologi"],"alternative":["Ost m. m. til husbehov"],"creatorAut":["Ingrid Dam"],"creatorSort":["Dam, Ingrid"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"abstract":["Om hjemmefremstilling af oste"],"description":["Rygtitel: Ost m. m. til husbehov"],"audience":["børnematerialer"],"version":["1. udg., 1. opl."],"publisher":["Skarv","eksp. DBK"],"date":["1986"],"typeBibDKType":["Bog"],"format":["illustreret"],"extent":["72 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}]});
        done();
      })
      .catch(result => {
        fail({throw: result}, {"statusCode":200,"data":[{"collection":["775100-katalog:27400337"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["27400337|870970"],"identifierISBN":["9788799164516"],"acSource":["Bibliotekskatalog"],"dcTitle":["Spis dig sund - æg, mælk, ost"],"dcTitleFull":["Spis dig sund - æg, mælk, ost"],"alternative":["Spis dig sund - æg, mælk & ost","Æg mælk ost","Spis dig sund - æg, mælk og ost"],"subjectDK5":["64.14"],"subjectDK5Text":["Diætmadlavning"],"subjectDBCO":["kogebøger","opskrifter"],"subjectDBCF":["mælk","ost","slankeretter","æg"],"audience":["voksenmaterialer"],"version":["1. udgave, [1. oplag] (2008)"],"publisher":["De Danske Vægtkonsulenter"],"contributor":["Inge Kauffeldt","Helle Kleist","De Danske Vægtkonsulenter"],"date":["2008"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["123 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_117&key=03dfcd1b843094643374"],"coverUrl207":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_207&key=32c6011a4746558e615c"],"coverUrl42":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_42&key=83ed29ba0547af202b60"],"coverUrl500":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_500&key=ce95baa8cf5b512415a8"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_lille&key=f9cbb6d29bf3b08e9b63"],"coverUrlFull":["//moreinfo.addi.dk/2.1/more_info_get.php?id=44502234&type=forside_stor&key=3b00ce40be4c34708464"]},{"collection":["775100-katalog:29130612"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["29130612|870970"],"identifierISBN":["9788799293643"],"acSource":["Bibliotekskatalog"],"dcTitle":["Bogen om ost"],"dcTitleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"audience":["voksenmaterialer"],"version":["1. udgave, 1. oplag (2011)"],"publisher":["Niche"],"contributorAut":["Kirsten Iversen","Lone Hindø"],"contributorDktek":["Peer Kjær Andersen"],"contributorEdt":["Vagn Juhl-Larsen"],"contributorIll":["Gunnar Knudsøø Jensen"],"date":["2011"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["135 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_117&key=0491d92384998752bd54"],"coverUrl207":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_207&key=e31d581065098252510b"],"coverUrl42":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_42&key=2af6cdac04843b4272ab"],"coverUrl500":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_500&key=25f8ae13eae02bdc4c31"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_lille&key=839ad047fc37a7a001ae"],"coverUrlFull":["//moreinfo.addi.dk/2.1/more_info_get.php?id=54073988&type=forside_stor&key=76488d24bb584cbfd462"]},{"collection":["775100-katalog:06468853"],"collectionDetails":[{"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["06468853|870970"],"identifierISBN":["87-7545-199-9"],"acSource":["Bibliotekskatalog"],"dcTitle":["Ost, smør og surmælksprodukter til husbehov"],"dcTitleFull":["Ost, smør og surmælksprodukter til husbehov"],"titleSeries":["Skarv's bøger om praktisk økologi"],"alternative":["Ost m. m. til husbehov"],"creatorAut":["Ingrid Dam"],"creatorSort":["Dam, Ingrid"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"abstract":["Om hjemmefremstilling af oste"],"description":["Rygtitel: Ost m. m. til husbehov"],"audience":["børnematerialer"],"version":["1. udg., 1. opl."],"publisher":["Skarv","eksp. DBK"],"date":["1986"],"typeBibDKType":["Bog"],"format":["illustreret"],"extent":["72 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}]});
        done();
      });
  });
});
