/* eslint-disable max-len, quotes, comma-spacing, key-spacing, quote-props */
// Request: search {"q":"ost","fields":["pid","creator","coverUrlFull"],"limit":3}
'use strict';
import Provider from '../../provider/Provider.js';
import {assert, fail} from 'chai';

let context = {"services":{"ddbcmsapi":"http://rest.filmstriben.dbc.inlead.dk/web/","moreinfo":"http://moreinfo.addi.dk/2.6/","openagency":"http://openagency.addi.dk/2.24/","openholdingstatus":"https://openholdingstatus.addi.dk/2.2/","openorder":"https://openorder.addi.dk/test_2.7.1/","opensearch":"http://opensearch.addi.dk/b3.0_4.2/","openuserstatus":"https://openuserstatus.addi.dk/1.4.1/","rank":"https://xptest.dbc.dk/ms/rank/v1","recommenddefault":"https://xptest.dbc.dk/ms/recommend-cosim/v1","recommendpopular":"https://xptest.dbc.dk/ms/recommend-pop/v1","suggestpopular":"http://xptest.dbc.dk/ms/entity-pop/v1","suggestcreator":"http://xptest.dbc.dk/ms/entity-suggest/v1/creator","suggestlibrary":"http://xptest.dbc.dk/ms/entity-suggest/v1/library","suggestsubject":"http://xptest.dbc.dk/ms/entity-suggest/v1/subject"},"agency":{"search":"870970","order":"DK-710118"},"netpunkt":{"user":"XXXXX","group":"XXXXX","password":"XXXXX"},"user":{"id":"XXXXX","pin":"XXXXX","salt":"XXXXX"},"app":{"clientid":"to-be-decided","collectionidentifiers":"rec.collectionIdentifier:150013-palle OR rec.collectionIdentifier:758000-katalog","ddbcmsapipassword":"XXXXX","orderpolicyrequester":"190101","searchprofile":"opac"},"opensearch":{"url":"http://opensearch.addi.dk/b3.0_4.2/","agency":"775100","profile":"opac"},"moreinfo":{"url":"http://moreinfo.addi.dk/2.6/","user":"XXXXX","group":"XXXXX","password":"XXXXX"},"entitysuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1","libraryType":"folkebibliotek"},"popsuggest":{"url":"http://xptest.dbc.dk/ms/entity-pop/v1"},"creatorsuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1/creator"},"librarysuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1/library","librarytype":"folkebibliotek"},"subjectsuggest":{"url":"http://xptest.dbc.dk/ms/entity-suggest/v1/subject"},"orderpolicy":{"url":"https://openorder.addi.dk/test_2.7.1/","servicerequester":"190101"},"userstatus":{"salt":"XXXXX","url":"https://openuserstatus.addi.dk/1.4.1/","userid":"XXXXX","userpin":"XXXXX","useragency":"DK-100451","authgroupid":"XXXXX","authpassword":"XXXXX","authid":"XXXXX"},"recommend":{"urls":{"default":"https://xptest.dbc.dk/ms/recommend-cosim/v1","popular":"https://xptest.dbc.dk/ms/recommend-pop/v1"}},"openagency":{"url":"http://openagency.addi.dk/2.24/","agency":"775100"},"ddbcms":{"url":"http://rest.filmstriben.dbc.inlead.dk/web/","agency":"775100","password":"XXXXX"},"rank":{"url":"https://xptest.dbc.dk/ms/rank/v1"}};
let provider = Provider();
let mockData = {"[\"opensearch\",\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<SOAP-ENV:Envelope xmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" xmlns:ns1=\\\"http://oss.dbc.dk/ns/opensearch\\\">\\n  <SOAP-ENV:Body>\\n    <ns1:searchRequest>\\n      <ns1:query>ost</ns1:query>\\n      <ns1:agency>775100</ns1:agency>\\n      <ns1:profile>opac</ns1:profile>\\n      <ns1:start>1</ns1:start>\\n      <ns1:stepValue>3</ns1:stepValue>\\n      \\n      <ns1:collectionType>work-1</ns1:collectionType>\\n      <ns1:allObjects>1</ns1:allObjects>\\n      <ns1:objectFormat>briefDisplay</ns1:objectFormat>\\n      <ns1:objectFormat>dkabm</ns1:objectFormat>\\n      <ns1:outputType>json</ns1:outputType>\\n    </ns1:searchRequest>\\n  </SOAP-ENV:Body>\\n</SOAP-ENV:Envelope>\\n\"]":"{\"searchResponse\":{\"result\":{\"hitCount\":{\"$\":\"153\"},\"collectionCount\":{\"$\":\"3\"},\"more\":{\"$\":\"true\"},\"searchResult\":[{\"collection\":{\"resultPosition\":{\"$\":\"1\"},\"numberOfObjects\":{\"$\":\"1\"},\"object\":[{\"record\":{\"identifier\":[{\"$\":\"27400337|870970\",\"@\":\"ac\"},{\"$\":\"9788799164516\",\"@type\":{\"$\":\"dkdcplus:ISBN\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"source\":[{\"$\":\"Bibliotekskatalog\",\"@\":\"ac\"}],\"title\":[{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\",\"@\":\"dc\"},{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\",\"@type\":{\"$\":\"dkdcplus:full\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"alternative\":[{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk & ost\",\"@\":\"dcterms\"},{\"$\":\"\\u00c6g m\\u00e6lk ost\",\"@\":\"dcterms\"},{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk og ost\",\"@\":\"dcterms\"}],\"subject\":[{\"$\":\"64.14\",\"@type\":{\"$\":\"dkdcplus:DK5\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Di\\u00e6tmadlavning\",\"@type\":{\"$\":\"dkdcplus:DK5-Text\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"kogeb\\u00f8ger\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"m\\u00e6lk\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"opskrifter\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ost\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"slankeretter\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"\\u00e6g\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"audience\":[{\"$\":\"voksenmaterialer\",\"@\":\"dcterms\"}],\"version\":[{\"$\":\"1. udgave, [1. oplag] (2008)\",\"@\":\"dkdcplus\"}],\"publisher\":[{\"$\":\"De Danske V\\u00e6gtkonsulenter\",\"@\":\"dc\"}],\"contributor\":[{\"$\":\"Inge Kauffeldt\",\"@\":\"dc\"},{\"$\":\"Helle Kleist\",\"@\":\"dc\"},{\"$\":\"De Danske V\\u00e6gtkonsulenter\",\"@\":\"dc\"}],\"date\":[{\"$\":\"2008\",\"@\":\"dc\"}],\"type\":[{\"$\":\"Bog\",\"@type\":{\"$\":\"dkdcplus:BibDK-Type\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"format\":[{\"$\":\"illustreret i farver\",\"@\":\"dc\"}],\"extent\":[{\"$\":\"123 sider\",\"@\":\"dcterms\"}],\"language\":[{\"$\":\"dan\",\"@type\":{\"$\":\"dcterms:ISO639-2\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dansk\",\"@\":\"dc\"}],\"@\":\"dkabm\"},\"identifier\":{\"$\":\"775100-katalog:27400337\"},\"primaryObjectIdentifier\":{\"$\":\"870970-basis:27400337\"},\"recordStatus\":{\"$\":\"active\"},\"formatsAvailable\":{\"format\":[{\"$\":\"dkabm\"},{\"$\":\"marcxchange\"}]},\"objectsAvailable\":{\"identifier\":[{\"$\":\"775100-katalog:27400337\"},{\"$\":\"870970-basis:27400337\"}]}}]},\"formattedCollection\":{\"briefDisplay\":{\"manifestation\":[{\"accessType\":{\"$\":\"physical\"},\"fedoraPid\":{\"$\":\"830370-katalog:27400337\"},\"identifier\":{\"$\":\"775100-katalog:27400337\"},\"language\":{\"$\":\"Dansk\"},\"title\":{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\"},\"titleFull\":{\"$\":\"Spis dig sund - \\u00e6g, m\\u00e6lk, ost\"},\"type\":{\"$\":\"Bog\"},\"workType\":{\"$\":\"book\"}}]}}},{\"collection\":{\"resultPosition\":{\"$\":\"2\"},\"numberOfObjects\":{\"$\":\"1\"},\"object\":[{\"record\":{\"identifier\":[{\"$\":\"29130612|870970\",\"@\":\"ac\"},{\"$\":\"9788799293643\",\"@type\":{\"$\":\"dkdcplus:ISBN\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"source\":[{\"$\":\"Bibliotekskatalog\",\"@\":\"ac\"}],\"title\":[{\"$\":\"Bogen om ost\",\"@\":\"dc\"},{\"$\":\"Bogen om ost : mild moden mangfoldig : lav din egen ost\",\"@type\":{\"$\":\"dkdcplus:full\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"subject\":[{\"$\":\"63.7\",\"@type\":{\"$\":\"dkdcplus:DK5\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Mejeribrug\",\"@type\":{\"$\":\"dkdcplus:DK5-Text\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"fremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"opskrifter\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ost\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ostefremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"audience\":[{\"$\":\"voksenmaterialer\",\"@\":\"dcterms\"}],\"version\":[{\"$\":\"1. udgave, 1. oplag (2011)\",\"@\":\"dkdcplus\"}],\"publisher\":[{\"$\":\"Niche\",\"@\":\"dc\"}],\"contributor\":[{\"$\":\"Kirsten Iversen\",\"@type\":{\"$\":\"dkdcplus:aut\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Lone Hind\\u00f8\",\"@type\":{\"$\":\"dkdcplus:aut\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Peer Kj\\u00e6r Andersen\",\"@type\":{\"$\":\"dkdcplus:dktek\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Vagn Juhl-Larsen\",\"@type\":{\"$\":\"dkdcplus:edt\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Gunnar Knuds\\u00f8\\u00f8 Jensen\",\"@type\":{\"$\":\"dkdcplus:ill\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"date\":[{\"$\":\"2011\",\"@\":\"dc\"}],\"type\":[{\"$\":\"Bog\",\"@type\":{\"$\":\"dkdcplus:BibDK-Type\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"format\":[{\"$\":\"illustreret i farver\",\"@\":\"dc\"}],\"extent\":[{\"$\":\"135 sider\",\"@\":\"dcterms\"}],\"language\":[{\"$\":\"dan\",\"@type\":{\"$\":\"dcterms:ISO639-2\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dansk\",\"@\":\"dc\"}],\"@\":\"dkabm\"},\"identifier\":{\"$\":\"775100-katalog:29130612\"},\"primaryObjectIdentifier\":{\"$\":\"870970-basis:29130612\"},\"recordStatus\":{\"$\":\"active\"},\"formatsAvailable\":{\"format\":[{\"$\":\"dkabm\"},{\"$\":\"marcxchange\"}]},\"objectsAvailable\":{\"identifier\":[{\"$\":\"775100-katalog:29130612\"},{\"$\":\"870970-basis:29130612\"}]}}]},\"formattedCollection\":{\"briefDisplay\":{\"manifestation\":[{\"accessType\":{\"$\":\"physical\"},\"fedoraPid\":{\"$\":\"830370-katalog:29130612\"},\"identifier\":{\"$\":\"775100-katalog:29130612\"},\"language\":{\"$\":\"Dansk\"},\"title\":{\"$\":\"Bogen om ost\"},\"titleFull\":{\"$\":\"Bogen om ost : mild moden mangfoldig : lav din egen ost\"},\"type\":{\"$\":\"Bog\"},\"workType\":{\"$\":\"book\"}}]}}},{\"collection\":{\"resultPosition\":{\"$\":\"3\"},\"numberOfObjects\":{\"$\":\"1\"},\"object\":[{\"record\":{\"identifier\":[{\"$\":\"06468853|870970\",\"@\":\"ac\"},{\"$\":\"87-7545-199-9\",\"@type\":{\"$\":\"dkdcplus:ISBN\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"source\":[{\"$\":\"Bibliotekskatalog\",\"@\":\"ac\"}],\"title\":[{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\",\"@\":\"dc\"},{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\",\"@type\":{\"$\":\"dkdcplus:full\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Skarv's b\\u00f8ger om praktisk \\u00f8kologi\",\"@type\":{\"$\":\"dkdcplus:series\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"alternative\":[{\"$\":\"Ost m. m. til husbehov\",\"@\":\"dcterms\"}],\"creator\":[{\"$\":\"Ingrid Dam\",\"@type\":{\"$\":\"dkdcplus:aut\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dam, Ingrid\",\"@type\":{\"$\":\"oss:sort\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"subject\":[{\"$\":\"63.7\",\"@type\":{\"$\":\"dkdcplus:DK5\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Mejeribrug\",\"@type\":{\"$\":\"dkdcplus:DK5-Text\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"fremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"opskrifter\",\"@type\":{\"$\":\"dkdcplus:DBCO\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ost\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"ostefremstilling\",\"@type\":{\"$\":\"dkdcplus:DBCF\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"abstract\":[{\"$\":\"Om hjemmefremstilling af oste\",\"@\":\"dcterms\"}],\"description\":[{\"$\":\"Rygtitel: Ost m. m. til husbehov\",\"@\":\"dc\"}],\"audience\":[{\"$\":\"b\\u00f8rnematerialer\",\"@\":\"dcterms\"}],\"version\":[{\"$\":\"1. udg., 1. opl.\",\"@\":\"dkdcplus\"}],\"publisher\":[{\"$\":\"Skarv\",\"@\":\"dc\"},{\"$\":\"eksp. DBK\",\"@\":\"dc\"}],\"date\":[{\"$\":\"1986\",\"@\":\"dc\"}],\"type\":[{\"$\":\"Bog\",\"@type\":{\"$\":\"dkdcplus:BibDK-Type\",\"@\":\"xsi\"},\"@\":\"dc\"}],\"format\":[{\"$\":\"illustreret\",\"@\":\"dc\"}],\"extent\":[{\"$\":\"72 sider\",\"@\":\"dcterms\"}],\"language\":[{\"$\":\"dan\",\"@type\":{\"$\":\"dcterms:ISO639-2\",\"@\":\"xsi\"},\"@\":\"dc\"},{\"$\":\"Dansk\",\"@\":\"dc\"}],\"@\":\"dkabm\"},\"identifier\":{\"$\":\"775100-katalog:06468853\"},\"primaryObjectIdentifier\":{\"$\":\"870970-basis:06468853\"},\"recordStatus\":{\"$\":\"active\"},\"formatsAvailable\":{\"format\":[{\"$\":\"dkabm\"},{\"$\":\"marcxchange\"}]},\"objectsAvailable\":{\"identifier\":[{\"$\":\"775100-katalog:06468853\"},{\"$\":\"870970-basis:06468853\"}]}}]},\"formattedCollection\":{\"briefDisplay\":{\"manifestation\":[{\"accessType\":{\"$\":\"physical\"},\"creator\":{\"$\":\"Ingrid Dam\"},\"fedoraPid\":{\"$\":\"830190-katalog:8775451999\"},\"identifier\":{\"$\":\"775100-katalog:06468853\"},\"language\":{\"$\":\"Dansk\"},\"title\":{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\"},\"titleFull\":{\"$\":\"Ost, sm\\u00f8r og surm\\u00e6lksprodukter til husbehov\"},\"type\":{\"$\":\"Bog\"},\"workType\":{\"$\":\"book\"}}]}}}],\"facetResult\":null,\"statInfo\":{\"fedoraRecordsCached\":{\"$\":\"17\"},\"fedoraRecordsRead\":{\"$\":\"1\"},\"time\":{\"$\":\"0.589834\"},\"trackingId\":{\"$\":\"2016-05-30T13:27:35:044252:23722\"}}}},\"@namespaces\":{\"ac\":\"http:\\/\\/biblstandard.dk\\/ac\\/namespace\\/\",\"dbcaddi\":\"http:\\/\\/oss.dbc.dk\\/rdf\\/dbcaddi#\",\"dbcbib\":\"http:\\/\\/oss.dbc.dk\\/rdf\\/dbcbib#\",\"dc\":\"http:\\/\\/purl.org\\/dc\\/elements\\/1.1\\/\",\"dcmitype\":\"http:\\/\\/purl.org\\/dc\\/dcmitype\\/\",\"dcterms\":\"http:\\/\\/purl.org\\/dc\\/terms\\/\",\"dkabm\":\"http:\\/\\/biblstandard.dk\\/abm\\/namespace\\/dkabm\\/\",\"dkdcplus\":\"http:\\/\\/biblstandard.dk\\/abm\\/namespace\\/dkdcplus\\/\",\"docbook\":\"http:\\/\\/docbook.org\\/ns\\/docbook\",\"kml\":\"http:\\/\\/www.opengis.net\\/kml\\/2.2\",\"marcx\":\"info:lc\\/xmlns\\/marcxchange-v1\",\"mx\":\"http:\\/\\/www.loc.gov\\/MARC21\\/slim\",\"of\":\"http:\\/\\/oss.dbc.dk\\/ns\\/openformat\",\"ofo\":\"http:\\/\\/oss.dbc.dk\\/ns\\/openformatoutput\",\"os\":\"http:\\/\\/oss.dbc.dk\\/ns\\/opensearch\",\"oso\":\"http:\\/\\/oss.dbc.dk\\/ns\\/opensearchobjects\",\"oss\":\"http:\\/\\/oss.dbc.dk\\/ns\\/osstypes\",\"xs\":\"http:\\/\\/www.w3.org\\/2001\\/XMLSchema\",\"xsi\":\"http:\\/\\/www.w3.org\\/2001\\/XMLSchema-instance\"}}","[\"moreinfo\",{\"qs\":{\"action\":\"moreInfo\",\"authenticationUser\":\"XXXXX\",\"authenticationGroup\":\"XXXXX\",\"authenticationPassword\":\"XXXXX\",\"pidList\":\"775100-katalog:27400337|775100-katalog:29130612|775100-katalog:06468853\",\"outputType\":\"json\"}}]":"{\"moreInfoResponse\":{\"requestStatus\":{\"statusEnum\":{\"$\":\"ok\",\"@\":\"mi\"},\"errorText\":{\"$\":\"\",\"@\":\"mi\"},\"@\":\"mi\"},\"identifierInformation\":[{\"identifierKnown\":{\"$\":\"true\",\"@\":\"mi\"},\"identifier\":{\"pid\":{\"$\":\"775100-katalog:27400337\",\"@\":\"mi\"},\"@\":\"mi\"},\"coverImage\":[{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=27400337&attachment_type=forside_117&bibliotek=870970&source_id=870970&key=bd886ac561f304b7843b\",\"@imageSize\":{\"$\":\"detail_117\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=27400337&attachment_type=forside_207&bibliotek=870970&source_id=870970&key=7dbb51cfc62843c10301\",\"@imageSize\":{\"$\":\"detail_207\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=27400337&attachment_type=forside_42&bibliotek=870970&source_id=870970&key=9cc72c7b085acab31f47\",\"@imageSize\":{\"$\":\"detail_42\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=27400337&attachment_type=forside_500&bibliotek=870970&source_id=870970&key=0ee1e4b5aafbbbb81758\",\"@imageSize\":{\"$\":\"detail_500\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=27400337&attachment_type=forside_lille&bibliotek=870970&source_id=870970&key=e1592b3fc99799c3ebc2\",\"@imageSize\":{\"$\":\"thumbnail\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=27400337&attachment_type=forside_stor&bibliotek=870970&source_id=870970&key=c657537d238ab022b740\",\"@imageSize\":{\"$\":\"detail\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"}],\"@\":\"mi\"},{\"identifierKnown\":{\"$\":\"true\",\"@\":\"mi\"},\"identifier\":{\"pid\":{\"$\":\"775100-katalog:29130612\",\"@\":\"mi\"},\"@\":\"mi\"},\"backImage\":[{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_117&bibliotek=870970&source_id=870970&key=89907a47b28d7ac5a365\",\"@imageSize\":{\"$\":\"detail_117\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_207&bibliotek=870970&source_id=870970&key=f2c322fc3e99024d6a9d\",\"@imageSize\":{\"$\":\"detail_207\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_42&bibliotek=870970&source_id=870970&key=1d2a182cff161937c15f\",\"@imageSize\":{\"$\":\"detail_42\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_500&bibliotek=870970&source_id=870970&key=4824c7d30ecf6f05f29f\",\"@imageSize\":{\"$\":\"detail_500\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_lille&bibliotek=870970&source_id=870970&key=862dc7b9e109ce5b07c4\",\"@imageSize\":{\"$\":\"thumbnail\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_stor&bibliotek=870970&source_id=870970&key=f4dfab9569c40e84150c\",\"@imageSize\":{\"$\":\"detail\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"}],\"backPage\":[{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=bagside_pdf&bibliotek=870970&source_id=870970&key=11c716332cd918551ae0\",\"@\":\"mi\"}],\"coverImage\":[{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=forside_117&bibliotek=870970&source_id=870970&key=73b26bf7a1235462b198\",\"@imageSize\":{\"$\":\"detail_117\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=forside_207&bibliotek=870970&source_id=870970&key=2ac5f8f1101de4d76cfa\",\"@imageSize\":{\"$\":\"detail_207\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=forside_42&bibliotek=870970&source_id=870970&key=47152073d0763c44852c\",\"@imageSize\":{\"$\":\"detail_42\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=forside_500&bibliotek=870970&source_id=870970&key=e28589d0170b9edb39db\",\"@imageSize\":{\"$\":\"detail_500\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=forside_lille&bibliotek=870970&source_id=870970&key=8ca2ddb03fe671d80c1d\",\"@imageSize\":{\"$\":\"thumbnail\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"},{\"$\":\"http:\\/\\/moreinfo.addi.dk\\/2.6\\/more_info_get.php?lokalid=29130612&attachment_type=forside_stor&bibliotek=870970&source_id=870970&key=42f09fc19dbc52301274\",\"@imageSize\":{\"$\":\"detail\",\"@\":\"mi\"},\"@imageFormat\":{\"$\":\"jpeg\",\"@\":\"mi\"},\"@\":\"mi\"}],\"@\":\"mi\"},{\"identifierKnown\":{\"$\":\"true\",\"@\":\"mi\"},\"identifier\":{\"pid\":{\"$\":\"775100-katalog:06468853\",\"@\":\"mi\"},\"@\":\"mi\"},\"@\":\"mi\"}],\"@\":\"mi\"},\"@namespaces\":{\"mi\":\"http:\\/\\/oss.dbc.dk\\/ns\\/moreinfo\"}}\n"};

describe('Automated test: search_coverUrl_limit', () => {
  it('expected response. ID:22vcv5, for {"q":"ost","fields":["pid","creator","coverUrlFull"],"limit":3}', (done) => {
    context.mockData = mockData;
    provider.execute('search', {"q":"ost","fields":["pid","creator","coverUrlFull"],"limit":3}, context)
      .then(result => {
        assert.deepEqual(result,
            {"statusCode":200,"data":[{"collection":["775100-katalog:27400337"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["27400337|870970"],"identifierISBN":["9788799164516"],"acSource":["Bibliotekskatalog"],"dcTitle":["Spis dig sund - æg, mælk, ost"],"dcTitleFull":["Spis dig sund - æg, mælk, ost"],"alternative":["Spis dig sund - æg, mælk & ost","Æg mælk ost","Spis dig sund - æg, mælk og ost"],"subjectDK5":["64.14"],"subjectDK5Text":["Diætmadlavning"],"subjectDBCO":["kogebøger","opskrifter"],"subjectDBCF":["mælk","ost","slankeretter","æg"],"audience":["voksenmaterialer"],"version":["1. udgave, [1. oplag] (2008)"],"publisher":["De Danske Vægtkonsulenter"],"contributor":["Inge Kauffeldt","Helle Kleist","De Danske Vægtkonsulenter"],"date":["2008"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["123 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_117&bibliotek=870970&source_id=870970&key=bd886ac561f304b7843b"],"coverUrl207":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_207&bibliotek=870970&source_id=870970&key=7dbb51cfc62843c10301"],"coverUrl42":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_42&bibliotek=870970&source_id=870970&key=9cc72c7b085acab31f47"],"coverUrl500":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_500&bibliotek=870970&source_id=870970&key=0ee1e4b5aafbbbb81758"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_lille&bibliotek=870970&source_id=870970&key=e1592b3fc99799c3ebc2"],"coverUrlFull":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_stor&bibliotek=870970&source_id=870970&key=c657537d238ab022b740"]},{"collection":["775100-katalog:29130612"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["29130612|870970"],"identifierISBN":["9788799293643"],"acSource":["Bibliotekskatalog"],"dcTitle":["Bogen om ost"],"dcTitleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"audience":["voksenmaterialer"],"version":["1. udgave, 1. oplag (2011)"],"publisher":["Niche"],"contributorAut":["Kirsten Iversen","Lone Hindø"],"contributorDktek":["Peer Kjær Andersen"],"contributorEdt":["Vagn Juhl-Larsen"],"contributorIll":["Gunnar Knudsøø Jensen"],"date":["2011"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["135 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_117&bibliotek=870970&source_id=870970&key=73b26bf7a1235462b198"],"coverUrl207":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_207&bibliotek=870970&source_id=870970&key=2ac5f8f1101de4d76cfa"],"coverUrl42":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_42&bibliotek=870970&source_id=870970&key=47152073d0763c44852c"],"coverUrl500":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_500&bibliotek=870970&source_id=870970&key=e28589d0170b9edb39db"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_lille&bibliotek=870970&source_id=870970&key=8ca2ddb03fe671d80c1d"],"coverUrlFull":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_stor&bibliotek=870970&source_id=870970&key=42f09fc19dbc52301274"]},{"collection":["775100-katalog:06468853"],"collectionDetails":[{"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["06468853|870970"],"identifierISBN":["87-7545-199-9"],"acSource":["Bibliotekskatalog"],"dcTitle":["Ost, smør og surmælksprodukter til husbehov"],"dcTitleFull":["Ost, smør og surmælksprodukter til husbehov"],"titleSeries":["Skarv's bøger om praktisk økologi"],"alternative":["Ost m. m. til husbehov"],"creatorAut":["Ingrid Dam"],"creatorSort":["Dam, Ingrid"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"abstract":["Om hjemmefremstilling af oste"],"description":["Rygtitel: Ost m. m. til husbehov"],"audience":["børnematerialer"],"version":["1. udg., 1. opl."],"publisher":["Skarv","eksp. DBK"],"date":["1986"],"typeBibDKType":["Bog"],"format":["illustreret"],"extent":["72 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}]});
        done();
      })
      .catch(result => {
        fail({throw: result}, {"statusCode":200,"data":[{"collection":["775100-katalog:27400337"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["27400337|870970"],"identifierISBN":["9788799164516"],"acSource":["Bibliotekskatalog"],"dcTitle":["Spis dig sund - æg, mælk, ost"],"dcTitleFull":["Spis dig sund - æg, mælk, ost"],"alternative":["Spis dig sund - æg, mælk & ost","Æg mælk ost","Spis dig sund - æg, mælk og ost"],"subjectDK5":["64.14"],"subjectDK5Text":["Diætmadlavning"],"subjectDBCO":["kogebøger","opskrifter"],"subjectDBCF":["mælk","ost","slankeretter","æg"],"audience":["voksenmaterialer"],"version":["1. udgave, [1. oplag] (2008)"],"publisher":["De Danske Vægtkonsulenter"],"contributor":["Inge Kauffeldt","Helle Kleist","De Danske Vægtkonsulenter"],"date":["2008"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["123 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:27400337"],"language":["Dansk"],"title":["Spis dig sund - æg, mælk, ost"],"titleFull":["Spis dig sund - æg, mælk, ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_117&bibliotek=870970&source_id=870970&key=bd886ac561f304b7843b"],"coverUrl207":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_207&bibliotek=870970&source_id=870970&key=7dbb51cfc62843c10301"],"coverUrl42":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_42&bibliotek=870970&source_id=870970&key=9cc72c7b085acab31f47"],"coverUrl500":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_500&bibliotek=870970&source_id=870970&key=0ee1e4b5aafbbbb81758"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_lille&bibliotek=870970&source_id=870970&key=e1592b3fc99799c3ebc2"],"coverUrlFull":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=27400337&attachment_type=forside_stor&bibliotek=870970&source_id=870970&key=c657537d238ab022b740"]},{"collection":["775100-katalog:29130612"],"collectionDetails":[{"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["29130612|870970"],"identifierISBN":["9788799293643"],"acSource":["Bibliotekskatalog"],"dcTitle":["Bogen om ost"],"dcTitleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"audience":["voksenmaterialer"],"version":["1. udgave, 1. oplag (2011)"],"publisher":["Niche"],"contributorAut":["Kirsten Iversen","Lone Hindø"],"contributorDktek":["Peer Kjær Andersen"],"contributorEdt":["Vagn Juhl-Larsen"],"contributorIll":["Gunnar Knudsøø Jensen"],"date":["2011"],"typeBibDKType":["Bog"],"format":["illustreret i farver"],"extent":["135 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"pid":["775100-katalog:29130612"],"language":["Dansk"],"title":["Bogen om ost"],"titleFull":["Bogen om ost : mild moden mangfoldig : lav din egen ost"],"type":["Bog"],"workType":["book"],"coverUrl117":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_117&bibliotek=870970&source_id=870970&key=73b26bf7a1235462b198"],"coverUrl207":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_207&bibliotek=870970&source_id=870970&key=2ac5f8f1101de4d76cfa"],"coverUrl42":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_42&bibliotek=870970&source_id=870970&key=47152073d0763c44852c"],"coverUrl500":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_500&bibliotek=870970&source_id=870970&key=e28589d0170b9edb39db"],"coverUrlThumbnail":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_lille&bibliotek=870970&source_id=870970&key=8ca2ddb03fe671d80c1d"],"coverUrlFull":["//moreinfo.addi.dk/2.6/more_info_get.php?lokalid=29130612&attachment_type=forside_stor&bibliotek=870970&source_id=870970&key=42f09fc19dbc52301274"]},{"collection":["775100-katalog:06468853"],"collectionDetails":[{"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}],"acIdentifier":["06468853|870970"],"identifierISBN":["87-7545-199-9"],"acSource":["Bibliotekskatalog"],"dcTitle":["Ost, smør og surmælksprodukter til husbehov"],"dcTitleFull":["Ost, smør og surmælksprodukter til husbehov"],"titleSeries":["Skarv's bøger om praktisk økologi"],"alternative":["Ost m. m. til husbehov"],"creatorAut":["Ingrid Dam"],"creatorSort":["Dam, Ingrid"],"subjectDK5":["63.7"],"subjectDK5Text":["Mejeribrug"],"subjectDBCF":["fremstilling","ost","ostefremstilling"],"subjectDBCO":["opskrifter"],"abstract":["Om hjemmefremstilling af oste"],"description":["Rygtitel: Ost m. m. til husbehov"],"audience":["børnematerialer"],"version":["1. udg., 1. opl."],"publisher":["Skarv","eksp. DBK"],"date":["1986"],"typeBibDKType":["Bog"],"format":["illustreret"],"extent":["72 sider"],"languageISO6392":["dan"],"dcLanguage":["Dansk"],"accessType":["physical"],"creator":["Ingrid Dam"],"pid":["775100-katalog:06468853"],"language":["Dansk"],"title":["Ost, smør og surmælksprodukter til husbehov"],"titleFull":["Ost, smør og surmælksprodukter til husbehov"],"type":["Bog"],"workType":["book"]}]});
        done();
      });
  });
});
