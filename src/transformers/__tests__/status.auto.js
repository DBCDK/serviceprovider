// AUTOTEST GENERATOR: {"endpoint":"status","params":{}}
//
//
// AUTOMATED UNIT TEST
// DO NOT EDIT
//
//
const endpoint = "status";
const params = {};

const expected = {"statusCode":200,"data":{"version":"3.0.0","endOfServiceDate":"0000-00-00T00:00:00Z","openagency":{"url":"https://openagency.addi.dk/2.34/","ok":true},"openholdingstatus":{"url":"https://openholdingstatus.addi.dk/3.0/","ok":true},"openorder":{"url":"https://openorder.addi.dk/3.0","ok":true},"openformat":{"url":"XXXXX","ok":true},"holdingsitems":{"url":"XXXXX","ok":true,"text":"Success"},"opensearch":{"url":"https://opensearch.addi.dk/b3.5_5.2/","ok":true},"openuserstatus":{"url":"https://openuserstatus.addi.dk/2.0/","ok":true},"moreinfo":{"url":"https://moreinfo.addi.dk/2.11/","ok":true},"ddbcmsapi":{"url":"https://cmscontent.dbc.dk/"},"recommend":{"url":"http://recomole-1-0.mi-prod.svc.cloud.dbc.dk/recomole/loan-cosim","ok":true},"communityservice":{"url":"http://localhost:4010/v1"},"storage":{"ok":true,"user":"XXXXX","client":"XXXXX"},"suggest":{"url":"http://ortograf-service-1-0.mi-prod.svc.cloud.dbc.dk/ortograf/","ok":true},"performance":[]}};

const context = {"services":{"ddbcmsapi":"https://cmscontent.dbc.dk/","moreinfo":"https://moreinfo.addi.dk/2.11/","openagency":"https://openagency.addi.dk/2.34/","openholdingstatus":"https://openholdingstatus.addi.dk/3.0/","PRODopenorder":"https://openorder.addi.dk/3.0","openorder":"https://openorder.addi.dk/3.0","opensearch":"https://opensearch.addi.dk/b3.5_5.2/","openuserstatus":"https://openuserstatus.addi.dk/2.0/","suggest":"http://ortograf-service-1-0.mi-prod.svc.cloud.dbc.dk/ortograf/","recommend":"http://recomole-1-0.mi-prod.svc.cloud.dbc.dk/recomole/loan-cosim","performance":"https://elk-p01.dbc.dk:9100/k8s-frontend-prod-*/","communityservice":"http://localhost:4010/v1","cicero":"https://cicero-fbs.com/rest/external/v1/","openformat":"XXXXX","holdingsitems":"XXXXX","infomediaservice":"XXXXX"},"infomedia":{"userId":"XXXXX","libraryCode":"XXXXX"},"cicero":{"DK-710100":"XXXXX"},"performance":{"username":"XXXXX","password":"XXXXX"},"communityservice":{"id":1},"search":{"agency":"775100","profile":"opac","collectionidentifiers":""},"storage":{"user":"XXXXX"},"netpunkt":{"user":"XXXXX","group":"XXXXX","password":"XXXXX"},"user":{"salt":"XXXXX","pin":"XXXXX","libraryId":"790900","agency":"790900","isil":"DK-790900"},"app":{"clientId":"XXXXX","ddbcmsapipassword":"XXXXX","orderpolicyrequester":"190101","orderSystem":"bibliotekdk"}};
const mockData = {"[\"XXXXX/status\",{\"qs\":{}}]":"{\"ok\":true,\"text\":\"Success\"}","[\"XXXXX\",{\"qs\":{\"pid\":\"870970-basis:25775481\",\"action\":\"formatObject\",\"outputFormat\":\"{\\\"fields\\\":{\\\"shelf\\\":\\\"{undefined}\\\"}}\"}}]":"<?xml version=\"1.0\" encoding=\"UTF-8\"?><SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:of=\"http://oss.dbc.dk/ns/openformat\"><SOAP-ENV:Body><of:formatResponse><customDisplay><error>could not combine input: undefined</error></customDisplay></of:formatResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>\n","[\"http://ortograf-service-1-0.mi-prod.svc.cloud.dbc.dk/ortograf/status\",{}]":"{\"ok\": true, \"build\": \"37\", \"git\": \"87419a80be28c894930cc19bde06c3ef68d7d744\", \"version\": \"0.2\", \"instance-id\": \"7996-2a65-4fbf-4cc3-819c-bb5f-134e-e2f1\", \"ab-id\": 1, \"mem-usage\": 81548, \"solr\": [{\"url\": \"http://ortograf-solr-1-0/solr/ortograf-all\", \"solr-ok\": true}, {\"url\": \"http://ortograf-solr-1-0/solr/ortograf-creator\", \"solr-ok\": true}, {\"url\": \"http://ortograf-solr-1-0/solr/ortograf-subject\", \"solr-ok\": true}, {\"url\": \"http://ortograf-solr-1-0/solr/ortograf-title\", \"solr-ok\": true}], \"statistics\": [{\"startup\": \"2020-03-31 02:11:07\", \"uptime\": \"851:55:00\", \"active\": 0, \"windowstart\": \"10:56:43\", \"total-success\": 620595, \"total-failure\": 14, \"window\": {\"success\": {\"count\": 5000, \"mean\": 9.628, \"std\": 2.908, \"min\": 5.58, \"25%\": 7.546, \"50%\": 8.487, \"75%\": 11.42, \"max\": 47.401}, \"failure\": {\"count\": 0, \"mean\": null, \"std\": null, \"min\": null, \"25%\": null, \"50%\": null, \"75%\": null, \"max\": null}}, \"name\": \"ortograf\"}]}","[\"http://recomole-1-0.mi-prod.svc.cloud.dbc.dk/recomole/status\",{}]":"{\"ok\": true, \"build\": \"26\", \"git\": \"1bf92b70028cd0a76798bc209e65ee3c6b96dc1d\", \"version\": \"0.1.0\", \"instance-id\": \"b9b6-d4d5-b307-4687-9d0b-b10d-54f2-5050\", \"ab-id\": 1, \"mem-usage\": 346504, \"statistics\": [{\"startup\": \"2020-03-24 09:54:12\", \"uptime\": \"1012:11:54\", \"active\": 0, \"windowstart\": \"07:36:25\", \"total-success\": 427538, \"total-failure\": 14126, \"window\": {\"success\": {\"count\": 5000, \"mean\": 180.14, \"std\": 137.699, \"min\": 36.479, \"25%\": 73.106, \"50%\": 178.684, \"75%\": 218.213, \"max\": 3217.722}, \"failure\": {\"count\": 0, \"mean\": null, \"std\": null, \"min\": null, \"25%\": null, \"50%\": null, \"75%\": null, \"max\": null}}, \"name\": \"loan-cosim-recommender\"}]}","[\"https://elk-p01.dbc.dk:9100/k8s-frontend-prod-*/_search\",{\"method\":\"POST\",\"auth\":{\"pass\":\"XXXXX\",\"user\":\"XXXXX\"},\"json\":{\"size\":0,\"query\":{\"bool\":{\"must\":[{\"match_all\":{}},{\"match_phrase\":{\"msg\":{\"query\":\"transformer-done\"}}},{\"match_phrase\":{\"app\":{\"query\":\"serviceprovider\"}}},{\"range\":{\"@timestamp\":{\"gte\":1588680307606,\"lte\":1588680367606,\"format\":\"epoch_millis\"}}}],\"filter\":[],\"should\":[],\"must_not\":[]}},\"aggs\":{\"version\":{\"terms\":{\"field\":\"version.keyword\"},\"aggs\":{\"endpoints\":{\"terms\":{\"field\":\"name.keyword\"},\"aggs\":{\"external\":{\"percentiles\":{\"field\":\"timings.external\"}},\"total\":{\"percentiles\":{\"field\":\"timings.total\"}}}}}}}}}]":{"took":10,"timed_out":false,"_shards":{"total":145,"successful":145,"skipped":144,"failed":0},"hits":{"total":{"value":0,"relation":"eq"},"max_score":null,"hits":[]},"aggregations":{"version":{"doc_count_error_upper_bound":0,"sum_other_doc_count":0,"buckets":[]}}},"[\"https://moreinfo.addi.dk/2.11/?HowRU\",{}]":"Gr8","[\"https://openagency.addi.dk/2.34/?HowRU\",{}]":"Gr8","[\"https://openholdingstatus.addi.dk/3.0/?HowRU\",{}]":"Gr8","[\"https://opensearch.addi.dk/b3.5_5.2/?HowRU\",{}]":"Gr8","[\"https://openuserstatus.addi.dk/2.0/?HowRU\",{}]":"Gr8","[\"openorder\",\"<SOAP-ENV:Envelope xmlns=\\\"http://oss.dbc.dk/ns/openorder\\\" xmlns:SOAP-ENV=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\">\\n     <SOAP-ENV:Body>\\n        <checkOrderPolicyRequest>\\n           <authentication>\\n              <groupIdAut>XXXXX</groupIdAut>\\n              <passwordAut>XXXXX</passwordAut>\\n              <userIdAut>XXXXX</userIdAut>\\n           </authentication>\\n           <pickUpAgencyId>790900</pickUpAgencyId>\\n           <pid>870970-basis:25775481</pid>\\n           <serviceRequester>190101</serviceRequester>\\n        </checkOrderPolicyRequest>\\n     </SOAP-ENV:Body>\\n  </SOAP-ENV:Envelope>\"]":"<?xml version='1.0' encoding='UTF-8'?><S:Envelope xmlns:S=\"http://schemas.xmlsoap.org/soap/envelope/\"><S:Body><ns1:checkOrderPolicyResponse xmlns:ns1=\"http://oss.dbc.dk/ns/openorder\"><ns1:orderPossible>true</ns1:orderPossible><ns1:orderPossibleReason>not_owned_ILL_loc</ns1:orderPossibleReason></ns1:checkOrderPolicyResponse></S:Body></S:Envelope>"};

import Provider from '../../provider/Provider.js';
import {assert, fail} from 'chai';
const provider = Provider();

describe('Automated test: status.auto', () => {
  it('has same result as recorded (in status.auto)', () => {
    assert(Date.now() < +new Date('2020-08-03'), 'Please recreate the automatically generated unit tests, such that the mock data does not come out of sync with the actual services. See README.md for details.');
    context.mockData = mockData;
    return provider.execute(endpoint, params, context)
      .then(result => {
        assert.deepEqual(result, expected);
      })
  });
});
