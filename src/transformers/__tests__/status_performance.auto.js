// AUTOTEST GENERATOR: {"endpoint":"status","params":{"fields":["performance"],"week":"2018-W15"}}
//
//
// AUTOMATED UNIT TEST
// DO NOT EDIT
//
//
const endpoint = 'status';
const params = {fields: ['performance'], week: '2018-W15'};

const expected = {
  statusCode: 200,
  data: {
    version: '3.0.0',
    endOfServiceDate: '0000-00-00T00:00:00Z',
    performance: [
      {
        week: '2018-W15',
        endpoint: 'work',
        version: '2.0.0',
        count: 155682,
        underlyingServices: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 53,
          '50.0': 249,
          '75.0': 509,
          '95.0': 3606,
          '99.0': 5955
        },
        total: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 55,
          '50.0': 258,
          '75.0': 516,
          '95.0': 3621,
          '99.0': 5974
        }
      },
      {
        week: '2018-W15',
        endpoint: 'libraries',
        version: '2.0.0',
        count: 104646,
        underlyingServices: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 0,
          '50.0': 0,
          '75.0': 0,
          '95.0': 0,
          '99.0': 0
        },
        total: {
          '1.0': 30,
          '5.0': 53,
          '25.0': 60,
          '50.0': 272,
          '75.0': 2302,
          '95.0': 3203,
          '99.0': 6073
        }
      },
      {
        week: '2018-W15',
        endpoint: 'search',
        version: '2.0.0',
        count: 104223,
        underlyingServices: {
          '1.0': 98,
          '5.0': 199,
          '25.0': 385,
          '50.0': 767,
          '75.0': 2464,
          '95.0': 5062,
          '99.0': 7269
        },
        total: {
          '1.0': 100,
          '5.0': 201,
          '25.0': 397,
          '50.0': 805,
          '75.0': 2517,
          '95.0': 5129,
          '99.0': 7366
        }
      },
      {
        week: '2018-W15',
        endpoint: 'availability',
        version: '2.0.0',
        count: 104039,
        underlyingServices: {
          '1.0': 873,
          '5.0': 983,
          '25.0': 1100,
          '50.0': 1268,
          '75.0': 1687,
          '95.0': 2939,
          '99.0': 3850
        },
        total: {
          '1.0': 874,
          '5.0': 984,
          '25.0': 1101,
          '50.0': 1269,
          '75.0': 1689,
          '95.0': 2940,
          '99.0': 3852
        }
      },
      {
        week: '2018-W15',
        endpoint: 'recommend',
        version: '2.0.0',
        count: 103742,
        underlyingServices: {
          '1.0': 7,
          '5.0': 8,
          '25.0': 10,
          '50.0': 50,
          '75.0': 61,
          '95.0': 121,
          '99.0': 129
        },
        total: {
          '1.0': 7,
          '5.0': 8,
          '25.0': 10,
          '50.0': 48,
          '75.0': 75,
          '95.0': 134,
          '99.0': 185
        }
      },
      {
        week: '2018-W15',
        endpoint: 'facets',
        version: '2.0.0',
        count: 102483,
        underlyingServices: {
          '1.0': 127,
          '5.0': 196,
          '25.0': 247,
          '50.0': 291,
          '75.0': 375,
          '95.0': 585,
          '99.0': 860
        },
        total: {
          '1.0': 131,
          '5.0': 200,
          '25.0': 255,
          '50.0': 307,
          '75.0': 393,
          '95.0': 608,
          '99.0': 880
        }
      },
      {
        week: '2018-W15',
        endpoint: 'user',
        version: '2.0.0',
        count: 1446,
        underlyingServices: {
          '1.0': 151,
          '5.0': 159,
          '25.0': 179,
          '50.0': 206,
          '75.0': 334,
          '95.0': 4203,
          '99.0': 15938
        },
        total: {
          '1.0': 156,
          '5.0': 163,
          '25.0': 185,
          '50.0': 215,
          '75.0': 352,
          '95.0': 4212,
          '99.0': 15969
        }
      },
      {
        week: '2018-W15',
        endpoint: 'order',
        version: '2.0.0',
        count: 6,
        underlyingServices: {
          '1.0': 1528,
          '5.0': 1606,
          '25.0': 1992,
          '50.0': 2474,
          '75.0': 17007,
          '95.0': 28633,
          '99.0': 30959
        },
        total: {
          '1.0': 1529,
          '5.0': 1607,
          '25.0': 1994,
          '50.0': 2478,
          '75.0': 17011,
          '95.0': 28636,
          '99.0': 30962
        }
      },
      {
        week: '2018-W15',
        endpoint: 'recommend',
        version: '1.0.0',
        count: 14994,
        underlyingServices: {
          '1.0': 7,
          '5.0': 7,
          '25.0': 9,
          '50.0': 10,
          '75.0': 18,
          '95.0': 37,
          '99.0': 57
        },
        total: {
          '1.0': 7,
          '5.0': 8,
          '25.0': 9,
          '50.0': 11,
          '75.0': 19,
          '95.0': 38,
          '99.0': 58
        }
      },
      {
        week: '2018-W15',
        endpoint: 'work',
        version: '1.0.0',
        count: 7752,
        underlyingServices: {
          '1.0': 101,
          '5.0': 147,
          '25.0': 248,
          '50.0': 387,
          '75.0': 656,
          '95.0': 2928,
          '99.0': 7676
        },
        total: {
          '1.0': 103,
          '5.0': 150,
          '25.0': 251,
          '50.0': 391,
          '75.0': 659,
          '95.0': 2937,
          '99.0': 7681
        }
      },
      {
        week: '2018-W15',
        endpoint: 'suggest',
        version: '1.0.0',
        count: 7476,
        underlyingServices: {
          '1.0': 154,
          '5.0': 167,
          '25.0': 178,
          '50.0': 187,
          '75.0': 196,
          '95.0': 334,
          '99.0': 779
        },
        total: {
          '1.0': 154,
          '5.0': 167,
          '25.0': 179,
          '50.0': 187,
          '75.0': 197,
          '95.0': 335,
          '99.0': 780
        }
      },
      {
        week: '2018-W15',
        endpoint: 'search',
        version: '1.0.0',
        count: 1270,
        underlyingServices: {
          '1.0': 99,
          '5.0': 162,
          '25.0': 457,
          '50.0': 737,
          '75.0': 1357,
          '95.0': 3059,
          '99.0': 18198
        },
        total: {
          '1.0': 100,
          '5.0': 164,
          '25.0': 468,
          '50.0': 745,
          '75.0': 1375,
          '95.0': 3083,
          '99.0': 18215
        }
      },
      {
        week: '2018-W15',
        endpoint: 'availability',
        version: '1.0.0',
        count: 680,
        underlyingServices: {
          '1.0': 487,
          '5.0': 901,
          '25.0': 1569,
          '50.0': 1926,
          '75.0': 2535,
          '95.0': 7612,
          '99.0': 11996
        },
        total: {
          '1.0': 488,
          '5.0': 902,
          '25.0': 1570,
          '50.0': 1928,
          '75.0': 2536,
          '95.0': 7612,
          '99.0': 11996
        }
      },
      {
        week: '2018-W15',
        endpoint: 'libraries',
        version: '1.0.0',
        count: 10,
        underlyingServices: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 0,
          '50.0': 0,
          '75.0': 0,
          '95.0': 0,
          '99.0': 0
        },
        total: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 0,
          '50.0': 1,
          '75.0': 1,
          '95.0': 1,
          '99.0': 1
        }
      },
      {
        week: '2018-W15',
        endpoint: 'facets',
        version: '1.0.0',
        count: 6,
        underlyingServices: {
          '1.0': 191,
          '5.0': 199,
          '25.0': 237,
          '50.0': 284,
          '75.0': 494,
          '95.0': 662,
          '99.0': 696
        },
        total: {
          '1.0': 194,
          '5.0': 201,
          '25.0': 238,
          '50.0': 284,
          '75.0': 495,
          '95.0': 664,
          '99.0': 698
        }
      },
      {
        week: '2018-W15',
        endpoint: 'order',
        version: '1.0.0',
        count: 6,
        underlyingServices: {
          '1.0': 1915,
          '5.0': 1978,
          '25.0': 2295,
          '50.0': 2690,
          '75.0': 4278,
          '95.0': 5547,
          '99.0': 5802
        },
        total: {
          '1.0': 1918,
          '5.0': 1981,
          '25.0': 2298,
          '50.0': 2694,
          '75.0': 4282,
          '95.0': 5552,
          '99.0': 5806
        }
      },
      {
        week: '2018-W15',
        endpoint: 'events',
        version: '1.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 68,
          '5.0': 68,
          '25.0': 68,
          '50.0': 68,
          '75.0': 68,
          '95.0': 68,
          '99.0': 68
        },
        total: {
          '1.0': 68,
          '5.0': 68,
          '25.0': 68,
          '50.0': 68,
          '75.0': 68,
          '95.0': 68,
          '99.0': 68
        }
      },
      {
        week: '2018-W15',
        endpoint: 'news',
        version: '1.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 45,
          '5.0': 45,
          '25.0': 45,
          '50.0': 45,
          '75.0': 45,
          '95.0': 45,
          '99.0': 45
        },
        total: {
          '1.0': 45,
          '5.0': 45,
          '25.0': 45,
          '50.0': 45,
          '75.0': 45,
          '95.0': 45,
          '99.0': 45
        }
      },
      {
        week: '2018-W15',
        endpoint: 'search',
        version: '3.0.0',
        count: 17,
        underlyingServices: {
          '1.0': 215,
          '5.0': 421,
          '25.0': 932,
          '50.0': 1216,
          '75.0': 1341,
          '95.0': 2523,
          '99.0': 3016
        },
        total: {
          '1.0': 224,
          '5.0': 454,
          '25.0': 998,
          '50.0': 1279,
          '75.0': 1398,
          '95.0': 2576,
          '99.0': 3070
        }
      },
      {
        week: '2018-W15',
        endpoint: 'status',
        version: '3.0.0',
        count: 8,
        underlyingServices: {
          '1.0': 5119,
          '5.0': 5135,
          '25.0': 5217,
          '50.0': 5319,
          '75.0': 5382,
          '95.0': 5432,
          '99.0': 5442
        },
        total: {
          '1.0': 5123,
          '5.0': 5140,
          '25.0': 5224,
          '50.0': 5329,
          '75.0': 5389,
          '95.0': 5437,
          '99.0': 5447
        }
      },
      {
        week: '2018-W15',
        endpoint: 'events',
        version: '3.0.0',
        count: 6,
        underlyingServices: {
          '1.0': 16,
          '5.0': 26,
          '25.0': 80,
          '50.0': 147,
          '75.0': 155,
          '95.0': 161,
          '99.0': 162
        },
        total: {
          '1.0': 82,
          '5.0': 95,
          '25.0': 159,
          '50.0': 238,
          '75.0': 281,
          '95.0': 315,
          '99.0': 322
        }
      },
      {
        week: '2018-W15',
        endpoint: 'suggest',
        version: '3.0.0',
        count: 4,
        underlyingServices: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 0,
          '50.0': 0,
          '75.0': 0,
          '95.0': 0,
          '99.0': 0
        },
        total: {
          '1.0': 2,
          '5.0': 2,
          '25.0': 2,
          '50.0': 2,
          '75.0': 2,
          '95.0': 2,
          '99.0': 2
        }
      },
      {
        week: '2018-W15',
        endpoint: 'availability',
        version: '3.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 1119,
          '5.0': 1119,
          '25.0': 1119,
          '50.0': 1119,
          '75.0': 1119,
          '95.0': 1119,
          '99.0': 1119
        },
        total: {
          '1.0': 1124,
          '5.0': 1124,
          '25.0': 1124,
          '50.0': 1124,
          '75.0': 1124,
          '95.0': 1124,
          '99.0': 1124
        }
      },
      {
        week: '2018-W15',
        endpoint: 'facets',
        version: '3.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 542,
          '5.0': 542,
          '25.0': 542,
          '50.0': 542,
          '75.0': 542,
          '95.0': 542,
          '99.0': 542
        },
        total: {
          '1.0': 565,
          '5.0': 565,
          '25.0': 565,
          '50.0': 565,
          '75.0': 565,
          '95.0': 565,
          '99.0': 565
        }
      },
      {
        week: '2018-W15',
        endpoint: 'libraries',
        version: '3.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 4274,
          '5.0': 4274,
          '25.0': 4274,
          '50.0': 4274,
          '75.0': 4274,
          '95.0': 4274,
          '99.0': 4274
        },
        total: {
          '1.0': 4613,
          '5.0': 4613,
          '25.0': 4613,
          '50.0': 4613,
          '75.0': 4613,
          '95.0': 4613,
          '99.0': 4613
        }
      },
      {
        week: '2018-W15',
        endpoint: 'library',
        version: '3.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 80,
          '5.0': 80,
          '25.0': 80,
          '50.0': 80,
          '75.0': 80,
          '95.0': 80,
          '99.0': 80
        },
        total: {
          '1.0': 213,
          '5.0': 213,
          '25.0': 213,
          '50.0': 213,
          '75.0': 213,
          '95.0': 213,
          '99.0': 213
        }
      },
      {
        week: '2018-W15',
        endpoint: 'news',
        version: '3.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 67,
          '5.0': 67,
          '25.0': 67,
          '50.0': 67,
          '75.0': 67,
          '95.0': 67,
          '99.0': 67
        },
        total: {
          '1.0': 89,
          '5.0': 89,
          '25.0': 89,
          '50.0': 89,
          '75.0': 89,
          '95.0': 89,
          '99.0': 89
        }
      },
      {
        week: '2018-W15',
        endpoint: 'recommend',
        version: '3.0.0',
        count: 2,
        underlyingServices: {
          '1.0': 0,
          '5.0': 0,
          '25.0': 0,
          '50.0': 0,
          '75.0': 0,
          '95.0': 0,
          '99.0': 0
        },
        total: {
          '1.0': 2,
          '5.0': 2,
          '25.0': 2,
          '50.0': 2,
          '75.0': 2,
          '95.0': 2,
          '99.0': 2
        }
      }
    ]
  }
};

const context = {
  services: {
    ddbcmsapi: 'https://cmscontent.dbc.dk/',
    moreinfo: 'https://moreinfo.addi.dk/2.11/',
    openagency: 'https://openagency.addi.dk/2.34/',
    openholdingstatus: 'https://openholdingstatus.addi.dk/3.0/',
    openorder: 'https://openorder.addi.dk/2.8/',
    opensearch: 'https://opensearch.addi.dk/b3.5_5.0/',
    openuserstatus: 'https://openuserstatus.addi.dk/1.6.1/',
    rank: 'https://xptest.dbc.dk/ms/rank/v1',
    suggest: 'http://ortograf.mcp1-proxy.dbc.dk/ortograf/',
    recommend: 'http://staging.recomole.mcp1-proxy.dbc.dk/recomole/loan-cosim',
    communityservice: '',
    suggestpopular: 'XXXXX',
    suggestcreator: 'XXXXX',
    suggestlibrary: 'XXXXX',
    suggestsubject: 'XXXXX',
    performance: 'https://elk-p01.dbc.dk:9100/',
    recommendurls: 'XXXXX'
  },
  communityservice: {id: 1},
  performance: {password: 'XXXXX', username: 'XXXXX'},
  search: {agency: '710100', profile: 'opac'},
  netpunkt: {user: 'XXXXX', group: 'XXXXX', password: 'XXXXX'},
  user: {
    id: 'XXXXX',
    salt: 'XXXXX',
    pin: 'XXXXX',
    libraryId: '710100',
    agency: '710100',
    isil: 'DK-710100'
  },
  app: {
    clientId: 'XXXXX',
    ddbcmsapipassword: 'XXXXX',
    orderpolicyrequester: '190101',
    orderSystem: 'bibliotekdk'
  }
};
const mockData = {
  '["https://elk-p01.dbc.dk:9100/prod_ux-2018.15//_search",{"method":"POST","auth":{"pass":"XXXXX","user":"XXXXX"},"json":{"size":0,"query":{"match":{"msg":"transformer-done"}},"aggs":{"version":{"terms":{"field":"version.keyword"},"aggs":{"endpoints":{"terms":{"field":"name.keyword"},"aggs":{"external":{"percentiles":{"field":"timings.external"}},"total":{"percentiles":{"field":"timings.total"}}}}}}}}}]': {
    took: 103,
    timed_out: false,
    _shards: {total: 9, successful: 9, skipped: 0, failed: 0},
    hits: {total: 708516, max_score: 0, hits: []},
    aggregations: {
      version: {
        doc_count_error_upper_bound: 0,
        sum_other_doc_count: 0,
        buckets: [
          {
            key: '2.0.0',
            doc_count: 676267,
            endpoints: {
              doc_count_error_upper_bound: 0,
              sum_other_doc_count: 0,
              buckets: [
                {
                  key: 'work',
                  doc_count: 155682,
                  total: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 54.830016671684774,
                      '50.0': 257.5870369216236,
                      '75.0': 515.5233887952261,
                      '95.0': 3620.529186366137,
                      '99.0': 5973.603603371174
                    }
                  },
                  external: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 52.6056666952147,
                      '50.0': 249.35969029196468,
                      '75.0': 509.4687980410412,
                      '95.0': 3605.6146278317165,
                      '99.0': 5955.00961904762
                    }
                  }
                },
                {
                  key: 'libraries',
                  doc_count: 104646,
                  total: {
                    values: {
                      '1.0': 30,
                      '5.0': 53,
                      '25.0': 60,
                      '50.0': 271.77939541997057,
                      '75.0': 2302.482287588973,
                      '95.0': 3203.4240530303023,
                      '99.0': 6073.327724867724
                    }
                  },
                  external: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 0,
                      '50.0': 0,
                      '75.0': 0,
                      '95.0': 0,
                      '99.0': 0
                    }
                  }
                },
                {
                  key: 'search',
                  doc_count: 104223,
                  total: {
                    values: {
                      '1.0': 100,
                      '5.0': 200.85783762503604,
                      '25.0': 397.38161547883266,
                      '50.0': 805.0255415352955,
                      '75.0': 2517.089266301704,
                      '95.0': 5128.917806067894,
                      '99.0': 7365.843555555553
                    }
                  },
                  external: {
                    values: {
                      '1.0': 98,
                      '5.0': 198.62741477272726,
                      '25.0': 385.40442917143946,
                      '50.0': 766.817721601238,
                      '75.0': 2463.944157732664,
                      '95.0': 5061.807181537596,
                      '99.0': 7268.604642857142
                    }
                  }
                },
                {
                  key: 'availability',
                  doc_count: 104039,
                  total: {
                    values: {
                      '1.0': 873.6034782608697,
                      '5.0': 984.4473469387755,
                      '25.0': 1100.779248230861,
                      '50.0': 1268.5845345865841,
                      '75.0': 1688.6659470055697,
                      '95.0': 2940.189259259259,
                      '99.0': 3851.5292481202996
                    }
                  },
                  external: {
                    values: {
                      '1.0': 872.605,
                      '5.0': 983.3086793274202,
                      '25.0': 1099.8326884407481,
                      '50.0': 1267.5739128939986,
                      '75.0': 1687.4030805260318,
                      '95.0': 2939.3408869748473,
                      '99.0': 3849.6394285714287
                    }
                  }
                },
                {
                  key: 'recommend',
                  doc_count: 103742,
                  total: {
                    values: {
                      '1.0': 7,
                      '5.0': 8,
                      '25.0': 10,
                      '50.0': 47.87371279745342,
                      '75.0': 74.82065217391303,
                      '95.0': 134.00152394775037,
                      '99.0': 185.12818181818187
                    }
                  },
                  external: {
                    values: {
                      '1.0': 7,
                      '5.0': 8,
                      '25.0': 10,
                      '50.0': 49.70556099854717,
                      '75.0': 61,
                      '95.0': 121.00000000000001,
                      '99.0': 129
                    }
                  }
                },
                {
                  key: 'facets',
                  doc_count: 102483,
                  total: {
                    values: {
                      '1.0': 131.21767099567103,
                      '5.0': 200,
                      '25.0': 254.54562258069433,
                      '50.0': 306.58574567071594,
                      '75.0': 392.5468248251853,
                      '95.0': 608.4012268743913,
                      '99.0': 880.0595476190465
                    }
                  },
                  external: {
                    values: {
                      '1.0': 127.15835338680927,
                      '5.0': 196,
                      '25.0': 246.83469069870938,
                      '50.0': 290.94592200288884,
                      '75.0': 375.35611494061544,
                      '95.0': 584.9842013452028,
                      '99.0': 859.6990476190464
                    }
                  }
                },
                {
                  key: 'user',
                  doc_count: 1446,
                  total: {
                    values: {
                      '1.0': 156,
                      '5.0': 163,
                      '25.0': 185,
                      '50.0': 214.8,
                      '75.0': 352.43333333333334,
                      '95.0': 4211.899999999998,
                      '99.0': 15969.019999999999
                    }
                  },
                  external: {
                    values: {
                      '1.0': 151,
                      '5.0': 159,
                      '25.0': 179,
                      '50.0': 205.78787878787878,
                      '75.0': 333.5,
                      '95.0': 4202.599999999997,
                      '99.0': 15938.14
                    }
                  }
                },
                {
                  key: 'order',
                  doc_count: 6,
                  total: {
                    values: {
                      '1.0': 1529.36,
                      '5.0': 1606.8,
                      '25.0': 1994,
                      '50.0': 2478,
                      '75.0': 17010.5,
                      '95.0': 28636.499999999996,
                      '99.0': 30961.7
                    }
                  },
                  external: {
                    values: {
                      '1.0': 1528.3,
                      '5.0': 1605.5000000000002,
                      '25.0': 1991.5,
                      '50.0': 2474,
                      '75.0': 17007,
                      '95.0': 28633.399999999998,
                      '99.0': 30958.68
                    }
                  }
                }
              ]
            }
          },
          {
            key: '1.0.0',
            doc_count: 32198,
            endpoints: {
              doc_count_error_upper_bound: 0,
              sum_other_doc_count: 0,
              buckets: [
                {
                  key: 'recommend',
                  doc_count: 14994,
                  total: {
                    values: {
                      '1.0': 7,
                      '5.0': 8,
                      '25.0': 9,
                      '50.0': 11,
                      '75.0': 19,
                      '95.0': 38,
                      '99.0': 58
                    }
                  },
                  external: {
                    values: {
                      '1.0': 7,
                      '5.0': 7,
                      '25.0': 9,
                      '50.0': 10,
                      '75.0': 18,
                      '95.0': 37,
                      '99.0': 57
                    }
                  }
                },
                {
                  key: 'work',
                  doc_count: 7752,
                  total: {
                    values: {
                      '1.0': 103,
                      '5.0': 149.82,
                      '25.0': 251.26302083333334,
                      '50.0': 390.9745098039216,
                      '75.0': 659.0744485294117,
                      '95.0': 2936.937499999999,
                      '99.0': 7680.7199999999975
                    }
                  },
                  external: {
                    values: {
                      '1.0': 101,
                      '5.0': 147.01999999999998,
                      '25.0': 248.225,
                      '50.0': 386.8796484110885,
                      '75.0': 655.8181818181819,
                      '95.0': 2928.424999999999,
                      '99.0': 7676.269999999998
                    }
                  }
                },
                {
                  key: 'suggest',
                  doc_count: 7476,
                  total: {
                    values: {
                      '1.0': 154.37,
                      '5.0': 167,
                      '25.0': 178.99999999999997,
                      '50.0': 187,
                      '75.0': 197,
                      '95.0': 335.08571428571406,
                      '99.0': 779.7800000000007
                    }
                  },
                  external: {
                    values: {
                      '1.0': 154,
                      '5.0': 167,
                      '25.0': 178,
                      '50.0': 186.94285714285715,
                      '75.0': 196,
                      '95.0': 333.5149999999996,
                      '99.0': 778.7800000000007
                    }
                  }
                },
                {
                  key: 'search',
                  doc_count: 1270,
                  total: {
                    values: {
                      '1.0': 99.69999999999999,
                      '5.0': 164.4,
                      '25.0': 467.5,
                      '50.0': 745.4285714285713,
                      '75.0': 1374.5,
                      '95.0': 3082.5999999999963,
                      '99.0': 18215.199999999888
                    }
                  },
                  external: {
                    values: {
                      '1.0': 99.35999999999999,
                      '5.0': 162.4,
                      '25.0': 457,
                      '50.0': 736.75,
                      '75.0': 1357,
                      '95.0': 3059.099999999996,
                      '99.0': 18197.939999999886
                    }
                  }
                },
                {
                  key: 'availability',
                  doc_count: 680,
                  total: {
                    values: {
                      '1.0': 487.78,
                      '5.0': 901.9499999999999,
                      '25.0': 1569.75,
                      '50.0': 1928,
                      '75.0': 2535.5,
                      '95.0': 7611.9000000000015,
                      '99.0': 11996.020000000033
                    }
                  },
                  external: {
                    values: {
                      '1.0': 487.39,
                      '5.0': 900.95,
                      '25.0': 1569.25,
                      '50.0': 1925.5,
                      '75.0': 2535.25,
                      '95.0': 7611.9000000000015,
                      '99.0': 11996.020000000033
                    }
                  }
                },
                {
                  key: 'libraries',
                  doc_count: 10,
                  total: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 0,
                      '50.0': 0.5,
                      '75.0': 1,
                      '95.0': 1,
                      '99.0': 1
                    }
                  },
                  external: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 0,
                      '50.0': 0,
                      '75.0': 0,
                      '95.0': 0,
                      '99.0': 0
                    }
                  }
                },
                {
                  key: 'facets',
                  doc_count: 6,
                  total: {
                    values: {
                      '1.0': 193.84,
                      '5.0': 201.20000000000002,
                      '25.0': 238,
                      '50.0': 284,
                      '75.0': 495,
                      '95.0': 663.8,
                      '99.0': 697.56
                    }
                  },
                  external: {
                    values: {
                      '1.0': 190.9,
                      '5.0': 198.5,
                      '25.0': 236.5,
                      '50.0': 284,
                      '75.0': 494,
                      '95.0': 661.9999999999999,
                      '99.0': 695.5999999999999
                    }
                  }
                },
                {
                  key: 'order',
                  doc_count: 6,
                  total: {
                    values: {
                      '1.0': 1917.8400000000001,
                      '5.0': 1981.2,
                      '25.0': 2298,
                      '50.0': 2694,
                      '75.0': 4281.5,
                      '95.0': 5551.5,
                      '99.0': 5805.5
                    }
                  },
                  external: {
                    values: {
                      '1.0': 1914.82,
                      '5.0': 1978.1000000000001,
                      '25.0': 2294.5,
                      '50.0': 2690,
                      '75.0': 4277.5,
                      '95.0': 5547.499999999999,
                      '99.0': 5801.5
                    }
                  }
                },
                {
                  key: 'events',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 68,
                      '5.0': 68,
                      '25.0': 68,
                      '50.0': 68,
                      '75.0': 68,
                      '95.0': 68,
                      '99.0': 68
                    }
                  },
                  external: {
                    values: {
                      '1.0': 68,
                      '5.0': 68,
                      '25.0': 68,
                      '50.0': 68,
                      '75.0': 68,
                      '95.0': 68,
                      '99.0': 68
                    }
                  }
                },
                {
                  key: 'news',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 45,
                      '5.0': 45,
                      '25.0': 45,
                      '50.0': 45,
                      '75.0': 45,
                      '95.0': 45,
                      '99.0': 45
                    }
                  },
                  external: {
                    values: {
                      '1.0': 45,
                      '5.0': 45,
                      '25.0': 45,
                      '50.0': 45,
                      '75.0': 45,
                      '95.0': 45,
                      '99.0': 45
                    }
                  }
                }
              ]
            }
          },
          {
            key: '3.0.0',
            doc_count: 51,
            endpoints: {
              doc_count_error_upper_bound: 0,
              sum_other_doc_count: 4,
              buckets: [
                {
                  key: 'search',
                  doc_count: 17,
                  total: {
                    values: {
                      '1.0': 223.61,
                      '5.0': 454.05,
                      '25.0': 998,
                      '50.0': 1279,
                      '75.0': 1397.75,
                      '95.0': 2575.549999999999,
                      '99.0': 3070.3099999999995
                    }
                  },
                  external: {
                    values: {
                      '1.0': 215.31,
                      '5.0': 420.55,
                      '25.0': 932.25,
                      '50.0': 1215.5,
                      '75.0': 1341,
                      '95.0': 2523.349999999999,
                      '99.0': 3015.8699999999994
                    }
                  }
                },
                {
                  key: 'status',
                  doc_count: 8,
                  total: {
                    values: {
                      '1.0': 5123.2,
                      '5.0': 5140,
                      '25.0': 5224,
                      '50.0': 5329,
                      '75.0': 5389,
                      '95.0': 5437,
                      '99.0': 5446.599999999999
                    }
                  },
                  external: {
                    values: {
                      '1.0': 5119.08,
                      '5.0': 5135.4,
                      '25.0': 5217,
                      '50.0': 5319,
                      '75.0': 5382,
                      '95.0': 5432.4,
                      '99.0': 5442.48
                    }
                  }
                },
                {
                  key: 'events',
                  doc_count: 6,
                  total: {
                    values: {
                      '1.0': 82.18,
                      '5.0': 94.9,
                      '25.0': 158.5,
                      '50.0': 238,
                      '75.0': 281,
                      '95.0': 315.4,
                      '99.0': 322.28
                    }
                  },
                  external: {
                    values: {
                      '1.0': 15.68,
                      '5.0': 26.400000000000002,
                      '25.0': 80,
                      '50.0': 147,
                      '75.0': 154.5,
                      '95.0': 160.5,
                      '99.0': 161.7
                    }
                  }
                },
                {
                  key: 'suggest',
                  doc_count: 4,
                  total: {
                    values: {
                      '1.0': 2,
                      '5.0': 2,
                      '25.0': 2,
                      '50.0': 2,
                      '75.0': 2,
                      '95.0': 2,
                      '99.0': 2
                    }
                  },
                  external: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 0,
                      '50.0': 0,
                      '75.0': 0,
                      '95.0': 0,
                      '99.0': 0
                    }
                  }
                },
                {
                  key: 'availability',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 1124,
                      '5.0': 1124,
                      '25.0': 1124,
                      '50.0': 1124,
                      '75.0': 1124,
                      '95.0': 1124,
                      '99.0': 1124
                    }
                  },
                  external: {
                    values: {
                      '1.0': 1119,
                      '5.0': 1119,
                      '25.0': 1119,
                      '50.0': 1119,
                      '75.0': 1119,
                      '95.0': 1119,
                      '99.0': 1119
                    }
                  }
                },
                {
                  key: 'facets',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 565,
                      '5.0': 565,
                      '25.0': 565,
                      '50.0': 565,
                      '75.0': 565,
                      '95.0': 565,
                      '99.0': 565
                    }
                  },
                  external: {
                    values: {
                      '1.0': 542,
                      '5.0': 542,
                      '25.0': 542,
                      '50.0': 542,
                      '75.0': 542,
                      '95.0': 542,
                      '99.0': 542
                    }
                  }
                },
                {
                  key: 'libraries',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 4613,
                      '5.0': 4613,
                      '25.0': 4613,
                      '50.0': 4613,
                      '75.0': 4613,
                      '95.0': 4613,
                      '99.0': 4613
                    }
                  },
                  external: {
                    values: {
                      '1.0': 4274,
                      '5.0': 4274,
                      '25.0': 4274,
                      '50.0': 4274,
                      '75.0': 4274,
                      '95.0': 4274,
                      '99.0': 4274
                    }
                  }
                },
                {
                  key: 'library',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 213,
                      '5.0': 213,
                      '25.0': 213,
                      '50.0': 213,
                      '75.0': 213,
                      '95.0': 213,
                      '99.0': 213
                    }
                  },
                  external: {
                    values: {
                      '1.0': 80,
                      '5.0': 80,
                      '25.0': 80,
                      '50.0': 80,
                      '75.0': 80,
                      '95.0': 80,
                      '99.0': 80
                    }
                  }
                },
                {
                  key: 'news',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 89,
                      '5.0': 89,
                      '25.0': 89,
                      '50.0': 89,
                      '75.0': 89,
                      '95.0': 89,
                      '99.0': 89
                    }
                  },
                  external: {
                    values: {
                      '1.0': 67,
                      '5.0': 67,
                      '25.0': 67,
                      '50.0': 67,
                      '75.0': 67,
                      '95.0': 67,
                      '99.0': 67
                    }
                  }
                },
                {
                  key: 'recommend',
                  doc_count: 2,
                  total: {
                    values: {
                      '1.0': 2,
                      '5.0': 2,
                      '25.0': 2,
                      '50.0': 2,
                      '75.0': 2,
                      '95.0': 2,
                      '99.0': 2
                    }
                  },
                  external: {
                    values: {
                      '1.0': 0,
                      '5.0': 0,
                      '25.0': 0,
                      '50.0': 0,
                      '75.0': 0,
                      '95.0': 0,
                      '99.0': 0
                    }
                  }
                }
              ]
            }
          }
        ]
      }
    }
  }
};

import Provider from '../../provider/Provider.js';
import {assert, fail} from 'chai';
const provider = Provider();

describe('Automated test: status_performance.auto', () => {
  it('has same result as recorded (in status_performance.auto)', () => {
    assert(
      Date.now() < +new Date('2018-09-18'),
      'Please recreate the automatically generated unit tests, such that the mock data does not come out of sync with the actual services. See README.md for details.'
    );
    context.mockData = mockData;
    return provider.execute(endpoint, params, context).then(result => {
      assert.deepEqual(result, expected);
    });
  });
});
